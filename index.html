
<!DOCTYPE html><html><head><meta charSet="utf-8"/><title>Kaboom Playground</title><link rel="icon" href="/site/img/k.png"/><meta name="description" content="JavaScript game programming library that helps you make games fast and fun"/><meta name="viewport" content="initial-scale=0.6, user-scalable=no, width=device-width"/><meta name="twitter:card" content="player"/><meta name="twitter:title" content="Kaboom Playground"/><meta name="twitter:description" content="JavaScript game programming library that helps you make games fast and fun"/><meta name="twitter:image" content="https://kaboomjs.com/site/img/k.png"/><meta name="twitter:site" content="@kaboomjs"/><meta name="twitter:player" content="https://kaboomjs.com/demo/movement"/><meta name="twitter:player:width" content="480"/><meta name="twitter:player:height" content="480"/><script defer="" data-domain="kaboomjs.com" src="https://plausible.io/js/plausible.js"></script><meta name="next-head-count" content="14"/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-49c732db2acd2146.js" defer=""></script><script src="/_next/static/chunks/framework-ee8b8a1914c4e423.js" defer=""></script><script src="/_next/static/chunks/main-5aa7808756a2dd55.js" defer=""></script><script src="/_next/static/chunks/pages/_app-53657c26a1dbc298.js" defer=""></script><script src="/_next/static/chunks/4ad82c5e-560d0f7f5d825312.js" defer=""></script><script src="/_next/static/chunks/194-4a0fb85440a60e18.js" defer=""></script><script src="/_next/static/chunks/350-4ff0dc596e1a40c6.js" defer=""></script><script src="/_next/static/chunks/277-262f964ee30a6d8c.js" defer=""></script><script src="/_next/static/chunks/379-99afd616d1b223ac.js" defer=""></script><script src="/_next/static/chunks/238-1157f21c40160df1.js" defer=""></script><script src="/_next/static/chunks/524-18d7405af89b357c.js" defer=""></script><script src="/_next/static/chunks/185-837821378a126b3c.js" defer=""></script><script src="/_next/static/chunks/pages/play-7a963ed61890e726.js" defer=""></script><script src="/_next/static/qc8zwdgH8rYE9DWE3SuTM/_buildManifest.js" defer=""></script><script src="/_next/static/qc8zwdgH8rYE9DWE3SuTM/_ssgManifest.js" defer=""></script><script src="/_next/static/qc8zwdgH8rYE9DWE3SuTM/_middlewareManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><style data-emotion="css-global 7t7m6z">:root{--text-small:16px;--text-normal:20px;--text-big:24px;--text-huge:32px;--color-bg1:rgb(20, 20, 30);--color-bg2:rgb(32, 32, 46);--color-bg3:rgb(44, 44, 62);--color-bg4:rgb(56, 56, 78);--color-fg1:rgb(215, 225, 235);--color-fg2:rgb(165, 175, 190);--color-fg3:rgb(115, 125, 145);--color-fg4:rgb(65, 75, 100);--color-outline:var(--color-bg4);--color-bgpat:rgb(16, 16, 26);--color-fghl:rgb(215, 225, 235);--color-highlight:rgb(30, 140, 230);--color-accent:rgb(19, 33, 49);--color-danger:rgb(240, 90, 90);--color-errbg:rgb(40, 25, 35);}.night{--color-bg1:rgb(20, 20, 30);--color-bg2:rgb(32, 32, 46);--color-bg3:rgb(44, 44, 62);--color-bg4:rgb(56, 56, 78);--color-fg1:rgb(215, 225, 235);--color-fg2:rgb(165, 175, 190);--color-fg3:rgb(115, 125, 145);--color-fg4:rgb(65, 75, 100);--color-outline:var(--color-bg4);--color-bgpat:rgb(16, 16, 26);--color-fghl:rgb(215, 225, 235);--color-highlight:rgb(30, 140, 230);--color-accent:rgb(19, 33, 49);--color-danger:rgb(240, 90, 90);--color-errbg:rgb(40, 25, 35);}.blackhole{--color-bg1:rgb(0, 0, 0);--color-bg2:rgb(15, 15, 15);--color-bg3:rgb(30, 30, 30);--color-bg4:rgb(45, 45, 45);--color-fg1:rgb(215, 215, 215);--color-fg2:rgb(175, 175, 175);--color-fg3:rgb(135, 135, 135);--color-fg4:rgb(95, 95, 95);--color-outline:var(--color-bg4);--color-bgpat:rgb(15, 15, 15);--color-fghl:rgb(215, 215, 215);--color-highlight:rgb(30, 140, 200);--color-accent:rgb(19, 33, 49);--color-danger:rgb(255, 80, 80);--color-errbg:rgb(30, 10, 10);}.violet{--color-bg1:rgb(50, 30, 90);--color-bg2:rgb(62, 42, 105);--color-bg3:rgb(74, 54, 120);--color-bg4:rgb(86, 66, 135);--color-fg1:rgb(235, 220, 240);--color-fg2:rgb(220, 200, 230);--color-fg3:rgb(205, 180, 220);--color-fg4:rgb(190, 160, 210);--color-outline:var(--color-bg4);--color-bgpat:rgb(45, 25, 85);--color-fghl:rgb(255, 255, 255);--color-highlight:rgb(120, 120, 230);--color-accent:rgb(19, 33, 49);--color-danger:rgb(255, 90, 90);--color-errbg:rgb(30, 10, 10);}.grass{--color-bg1:rgb(20, 120, 100);--color-bg2:rgb(30, 135, 112);--color-bg3:rgb(40, 150, 124);--color-bg4:rgb(50, 165, 136);--color-fg1:rgb(220, 240, 235);--color-fg2:rgb(205, 230, 225);--color-fg3:rgb(190, 220, 215);--color-fg4:rgb(175, 210, 205);--color-outline:var(--color-bg4);--color-bgpat:rgb(10, 110, 90);--color-fghl:rgb(255, 255, 255);--color-highlight:rgb(40, 160, 160);--color-accent:rgb(19, 33, 49);--color-danger:rgb(255, 90, 90);--color-errbg:rgb(30, 10, 10);}.vibrant{--color-bg1:rgb(110, 50, 30);--color-bg2:rgb(125, 62, 42);--color-bg3:rgb(140, 74, 54);--color-bg4:rgb(155, 86, 66);--color-fg1:rgb(240, 235, 220);--color-fg2:rgb(230, 220, 205);--color-fg3:rgb(220, 205, 190);--color-fg4:rgb(210, 190, 175);--color-outline:var(--color-bg4);--color-bgpat:rgb(100, 40, 20);--color-fghl:rgb(255, 255, 255);--color-highlight:rgb(180, 120, 100);--color-accent:rgb(19, 33, 49);--color-danger:rgb(255, 90, 90);--color-errbg:rgb(30, 10, 10);}.snow{--color-bg1:rgb(250, 250, 250);--color-bg2:rgb(240, 240, 240);--color-bg3:rgb(230, 230, 230);--color-bg4:rgb(220, 220, 220);--color-fg1:rgb(60, 60, 60);--color-fg2:rgb(100, 100, 100);--color-fg3:rgb(140, 140, 140);--color-fg4:rgb(180, 180, 180);--color-outline:var(--color-bg4);--color-bgpat:rgb(240, 240, 240);--color-fghl:rgb(250, 250, 250);--color-highlight:rgb(60, 160, 240);--color-accent:rgb(19, 33, 49);--color-danger:rgb(255, 90, 90);--color-errbg:rgb(30, 10, 10);}.ice{--color-bg1:rgb(230, 240, 255);--color-bg2:rgb(220, 230, 250);--color-bg3:rgb(210, 220, 245);--color-bg4:rgb(200, 210, 240);--color-fg1:rgb(60, 65, 80);--color-fg2:rgb(95, 105, 125);--color-fg3:rgb(130, 145, 170);--color-fg4:rgb(165, 185, 215);--color-outline:var(--color-bg4);--color-bgpat:rgb(220, 230, 245);--color-fghl:rgb(250, 250, 250);--color-highlight:rgb(70, 180, 240);--color-accent:rgb(19, 33, 49);--color-danger:rgb(255, 90, 90);--color-errbg:rgb(30, 10, 10);}.spring{--color-bg1:rgb(255, 230, 240);--color-bg2:rgb(250, 220, 230);--color-bg3:rgb(245, 210, 220);--color-bg4:rgb(240, 200, 210);--color-fg1:rgb(80, 60, 65);--color-fg2:rgb(125, 95, 105);--color-fg3:rgb(170, 130, 145);--color-fg4:rgb(215, 165, 185);--color-outline:var(--color-bg4);--color-bgpat:rgb(245, 220, 230);--color-fghl:rgb(250, 250, 250);--color-highlight:rgb(30, 140, 230);--color-accent:rgb(19, 33, 49);--color-danger:rgb(255, 90, 90);--color-errbg:rgb(30, 10, 10);}@font-face{font-family:IBM Plex Sans;src:url(/site/fonts/IBMPlexSans-Regular.ttf) format("truetype");}@font-face{font-family:IBM Plex Mono;src:url(/site/fonts/IBMPlexMono-Regular.ttf) format("truetype");}*{margin:0;padding:0;box-sizing:border-box;outline:none;color:inherit;font-size:inherit;font-family:inherit;}html{width:100%;height:100%;font-family:IBM Plex Sans;font-size:var(--text-normal);color:var(--color-fg1);overflow:hidden;}body{width:100%;height:100%;overflow:hidden;}::-webkit-scrollbar{width:8px;height:8px;}::-webkit-scrollbar-track{background:rgba(0, 0, 0, 0.1);}::-webkit-scrollbar-track:hover{background:rgba(0, 0, 0, 0.2);}::-webkit-scrollbar-thumb{background:rgba(0, 0, 0, 0.3);border-radius:4px;}::-webkit-scrollbar-thumb:hover{background:rgba(0, 0, 0, 0.4);}::-webkit-scrollbar-corner{background:rgba(0, 0, 0, 0.1);}a{-webkit-text-decoration:none;text-decoration:none;}#__next{width:100%;height:100%;}::selection{background:var(--color-bg4);}</style><style data-emotion="css bvhepb">.css-bvhepb{background:var(--color-bg1);width:100%;height:100%;}</style><div class="night css-bvhepb"><style data-emotion="css i6bazn">.css-i6bazn{overflow:hidden;}</style><style data-emotion="css l0opse">.css-l0opse{background:url('data:image/svg+xml;utf8,<svg width="96" height="96" viewBox="0 0 96 96" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10 32L14.6774 6L39 13.9322L10 32Z" stroke="rgb(16, 16, 26)" stroke-width="4" stroke-linejoin="round"/><circle cx="74.5" cy="64.5" r="8.5" stroke="rgb(16, 16, 26)" stroke-width="4"/><path d="M76.0172 18.0537C56.1796 21.7223 71.4991 39.7933 51.0001 44.1491" stroke="rgb(16, 16, 26)" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/><rect x="12.6557" y="70.7719" width="19.2945" height="19.2945" rx="2" transform="rotate(-24.8755 12.6557 70.7719)" stroke="rgb(16, 16, 26)" stroke-width="4" stroke-linejoin="round"/><circle cx="32" cy="44" r="2" fill="rgb(16, 16, 26)"/><circle cx="58" cy="7" r="2" fill="rgb(16, 16, 26)"/><circle cx="90" cy="33" r="2" fill="rgb(16, 16, 26)"/><circle cx="52" cy="66" r="2" fill="rgb(16, 16, 26)"/><circle cx="3" cy="86" r="2" fill="rgb(16, 16, 26)"/></svg>') repeat var(--color-bg1);overflow:hidden;}</style><style data-emotion="css 1moqv77">.css-1moqv77{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;-webkit-box-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-box-flex-wrap:nowrap;-webkit-flex-wrap:nowrap;-ms-flex-wrap:nowrap;flex-wrap:nowrap;width:100%;height:100%;padding-left:0px;padding-right:0px;padding-top:0px;padding-bottom:0px;position:relative;border-radius:0;box-shadow:none;gap:0;background:url('data:image/svg+xml;utf8,<svg width="96" height="96" viewBox="0 0 96 96" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10 32L14.6774 6L39 13.9322L10 32Z" stroke="rgb(16, 16, 26)" stroke-width="4" stroke-linejoin="round"/><circle cx="74.5" cy="64.5" r="8.5" stroke="rgb(16, 16, 26)" stroke-width="4"/><path d="M76.0172 18.0537C56.1796 21.7223 71.4991 39.7933 51.0001 44.1491" stroke="rgb(16, 16, 26)" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/><rect x="12.6557" y="70.7719" width="19.2945" height="19.2945" rx="2" transform="rotate(-24.8755 12.6557 70.7719)" stroke="rgb(16, 16, 26)" stroke-width="4" stroke-linejoin="round"/><circle cx="32" cy="44" r="2" fill="rgb(16, 16, 26)"/><circle cx="58" cy="7" r="2" fill="rgb(16, 16, 26)"/><circle cx="90" cy="33" r="2" fill="rgb(16, 16, 26)"/><circle cx="52" cy="66" r="2" fill="rgb(16, 16, 26)"/><circle cx="3" cy="86" r="2" fill="rgb(16, 16, 26)"/></svg>') repeat var(--color-bg1);overflow:hidden;}.css-1moqv77:focus{box-shadow:none;}</style><div class="css-1moqv77"><style data-emotion="css ba7j7n">.css-ba7j7n{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-flex-wrap:nowrap;-webkit-flex-wrap:nowrap;-ms-flex-wrap:nowrap;flex-wrap:nowrap;width:100%;padding-left:16px;padding-right:16px;padding-top:8px;padding-bottom:8px;position:relative;border-radius:0;box-shadow:none;gap:0;}.css-ba7j7n:focus{box-shadow:none;}</style><div class="css-ba7j7n"><style data-emotion="css 1ezjsjy">.css-1ezjsjy{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-box-flex-wrap:nowrap;-webkit-flex-wrap:nowrap;-ms-flex-wrap:nowrap;flex-wrap:nowrap;padding-left:0px;padding-right:0px;padding-top:0px;padding-bottom:0px;position:relative;border-radius:0;box-shadow:none;gap:16px;}.css-1ezjsjy:focus{box-shadow:none;}</style><div class="css-1ezjsjy"><style data-emotion="css 15l2r4k">.css-15l2r4k{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;-webkit-box-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-box-flex-wrap:nowrap;-webkit-flex-wrap:nowrap;-ms-flex-wrap:nowrap;flex-wrap:nowrap;padding-left:0px;padding-right:0px;padding-top:0px;padding-bottom:0px;position:relative;border-radius:8px;box-shadow:none;gap:0;}.css-15l2r4k:focus{box-shadow:none;}</style><div class="css-15l2r4k"><a href="/"><style data-emotion="css sfvpng">.css-sfvpng{width:48px;cursor:pointer;}</style><img src="/site/img/k.png" alt="logo" class="css-sfvpng"/></a></div><style data-emotion="css w01k94">.css-w01k94{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:relative;}.css-w01k94:hover{background:var(--color-bg4);}</style><style data-emotion="css m5h4j6">.css-m5h4j6{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;-webkit-box-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-box-flex-wrap:nowrap;-webkit-flex-wrap:nowrap;-ms-flex-wrap:nowrap;flex-wrap:nowrap;background:var(--color-bg3);padding-left:0px;padding-right:0px;padding-top:0px;padding-bottom:0px;position:relative;border-radius:8px;box-shadow:0 0 0 2px var(--color-outline);gap:0;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:relative;}.css-m5h4j6:focus{box-shadow:0 0 0 2px var(--color-highlight);}.css-m5h4j6:hover{background:var(--color-bg4);}</style><div tabindex="0" class="css-m5h4j6"><style data-emotion="css 18jw64n">.css-18jw64n{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-box-flex-wrap:nowrap;-webkit-flex-wrap:nowrap;-ms-flex-wrap:nowrap;flex-wrap:nowrap;width:100%;padding-left:0px;padding-right:0px;padding-top:0px;padding-bottom:0px;position:relative;border-radius:0;box-shadow:none;gap:8px;}.css-18jw64n:focus{box-shadow:none;}</style><div class="css-18jw64n"><style data-emotion="css ys8cwo">.css-ys8cwo{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;-webkit-box-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-box-flex-wrap:nowrap;-webkit-flex-wrap:nowrap;-ms-flex-wrap:nowrap;flex-wrap:nowrap;padding-left:8px;padding-right:8px;padding-top:4px;padding-bottom:4px;position:relative;border-radius:0;box-shadow:none;gap:0;}.css-ys8cwo:focus{box-shadow:none;}</style><div class="css-ys8cwo"><style data-emotion="css q7lffx">.css-q7lffx{opacity:0;}</style><style data-emotion="css a3n45r">.css-a3n45r{font-family:IBM Plex Sans;font-size:var(--text-normal);font-weight:normal;font-style:normal;-webkit-text-decoration:none;text-decoration:none;color:var(--color-fg1);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;opacity:0;}</style><span class="css-a3n45r">spriteMerged</span><style data-emotion="css 12efcmn">.css-12efcmn{position:absolute;}</style><style data-emotion="css iuet2r">.css-iuet2r{font-family:IBM Plex Sans;font-size:var(--text-normal);font-weight:normal;font-style:normal;-webkit-text-decoration:none;text-decoration:none;color:var(--color-fg1);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:absolute;}</style><span class="css-iuet2r">movement</span></div><style data-emotion="css 1tre2kl">.css-1tre2kl{border-top-right-radius:6px;border-bottom-right-radius:6px;}</style><style data-emotion="css ptt1m7">.css-ptt1m7{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-flex-wrap:nowrap;-webkit-flex-wrap:nowrap;-ms-flex-wrap:nowrap;flex-wrap:nowrap;width:32px;height:35px;background:var(--color-bg4);padding-left:0px;padding-right:0px;padding-top:0px;padding-bottom:0px;position:relative;border-radius:0;box-shadow:none;gap:0;border-top-right-radius:6px;border-bottom-right-radius:6px;}.css-ptt1m7:focus{box-shadow:none;}</style><div class="css-ptt1m7"><style data-emotion="css 1hl72xi">.css-1hl72xi{position:relative;left:2px;top:2px;-webkit-transform:rotate(90deg) scaleY(1.2);-moz-transform:rotate(90deg) scaleY(1.2);-ms-transform:rotate(90deg) scaleY(1.2);transform:rotate(90deg) scaleY(1.2);}</style><style data-emotion="css rtlxyy">.css-rtlxyy{font-family:IBM Plex Sans;font-size:var(--text-normal);font-weight:normal;font-style:normal;-webkit-text-decoration:none;text-decoration:none;color:var(--color-fg3);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:relative;left:2px;top:2px;-webkit-transform:rotate(90deg) scaleY(1.2);-moz-transform:rotate(90deg) scaleY(1.2);-ms-transform:rotate(90deg) scaleY(1.2);transform:rotate(90deg) scaleY(1.2);}</style><span class="css-rtlxyy">&gt;</span></div></div></div><style data-emotion="css 1h90oql">.css-1h90oql{font-size:var(--text-normal);cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}.css-1h90oql:hover{background:var(--color-bg4);}.css-1h90oql:active{background:var(--color-outline);}</style><style data-emotion="css 11pxigc">.css-11pxigc{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;-webkit-box-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-box-flex-wrap:nowrap;-webkit-flex-wrap:nowrap;-ms-flex-wrap:nowrap;flex-wrap:nowrap;background:var(--color-bg3);padding-left:8px;padding-right:8px;padding-top:4px;padding-bottom:4px;position:relative;border-radius:8px;box-shadow:0 0 0 2px var(--color-outline);gap:0;font-size:var(--text-normal);cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}.css-11pxigc:focus{box-shadow:0 0 0 2px var(--color-highlight);}.css-11pxigc:hover{background:var(--color-bg4);}.css-11pxigc:active{background:var(--color-outline);}</style><div tabindex="0" class="css-11pxigc"><style data-emotion="css fvg6eo">.css-fvg6eo{font-family:IBM Plex Sans;font-size:var(--text-normal);font-weight:normal;font-style:normal;-webkit-text-decoration:none;text-decoration:none;color:var(--color-fg1);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}</style><span class="css-fvg6eo">Run</span></div></div><div class="css-1ezjsjy"><style data-emotion="css 9jv7as">.css-9jv7as{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;padding-left:4px;padding-right:4px;padding-top:4px;padding-bottom:4px;position:relative;border-radius:8px;box-shadow:none;gap:12px;}.css-9jv7as:focus{box-shadow:none;}</style><div class="css-9jv7as"><style data-emotion="css 133o16p">.css-133o16p{box-shadow:0 0 0 2px var(--color-highlight);border-radius:50%;cursor:pointer;}</style><style data-emotion="css 7hyvlc">.css-7hyvlc{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;-webkit-box-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-box-flex-wrap:nowrap;-webkit-flex-wrap:nowrap;-ms-flex-wrap:nowrap;flex-wrap:nowrap;width:24px;height:24px;background:rgb(56, 56, 78);padding-left:0px;padding-right:0px;padding-top:0px;padding-bottom:0px;position:relative;border-radius:0;box-shadow:0 0 0 2px var(--color-outline);gap:0;box-shadow:0 0 0 2px var(--color-highlight);border-radius:50%;cursor:pointer;}.css-7hyvlc:focus{box-shadow:0 0 0 2px var(--color-highlight);}</style><div tabindex="0" class="css-7hyvlc"></div><style data-emotion="css i4rchz">.css-i4rchz{box-shadow:none;border-radius:50%;cursor:pointer;}</style><style data-emotion="css 1x4eod5">.css-1x4eod5{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;-webkit-box-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-box-flex-wrap:nowrap;-webkit-flex-wrap:nowrap;-ms-flex-wrap:nowrap;flex-wrap:nowrap;width:24px;height:24px;background:rgb(45, 45, 45);padding-left:0px;padding-right:0px;padding-top:0px;padding-bottom:0px;position:relative;border-radius:0;box-shadow:none;gap:0;box-shadow:none;border-radius:50%;cursor:pointer;}.css-1x4eod5:focus{box-shadow:none;}</style><div tabindex="0" class="css-1x4eod5"></div><style data-emotion="css cu2k5w">.css-cu2k5w{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;-webkit-box-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-box-flex-wrap:nowrap;-webkit-flex-wrap:nowrap;-ms-flex-wrap:nowrap;flex-wrap:nowrap;width:24px;height:24px;background:rgb(220, 220, 220);padding-left:0px;padding-right:0px;padding-top:0px;padding-bottom:0px;position:relative;border-radius:0;box-shadow:none;gap:0;box-shadow:none;border-radius:50%;cursor:pointer;}.css-cu2k5w:focus{box-shadow:none;}</style><div tabindex="0" class="css-cu2k5w"></div></div></div></div><style data-emotion="css 1fv0l0j">.css-1fv0l0j{-webkit-flex:1;-ms-flex:1;flex:1;overflow:hidden;padding-top:2px;padding-bottom:16px;padding-right:16px;padding-left:16px;}</style><style data-emotion="css 16pba43">.css-16pba43{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-box-flex-wrap:nowrap;-webkit-flex-wrap:nowrap;-ms-flex-wrap:nowrap;flex-wrap:nowrap;width:100%;padding-left:0px;padding-right:0px;padding-top:16px;padding-bottom:16px;position:relative;border-radius:0;box-shadow:none;gap:16px;-webkit-flex:1;-ms-flex:1;flex:1;overflow:hidden;padding-top:2px;padding-bottom:16px;padding-right:16px;padding-left:16px;}.css-16pba43:focus{box-shadow:none;}</style><div class="css-16pba43"><style data-emotion="css fzbuf9">.css-fzbuf9{-webkit-order:1;-ms-flex-order:1;order:1;z-index:20;}</style><style data-emotion="css j36zmb">.css-j36zmb{font-family:IBM Plex Mono;overflow:hidden;font-size:var(--text-normal);-webkit-order:1;-ms-flex-order:1;order:1;z-index:20;}.css-j36zmb:focus-within{box-shadow:0 0 0 2px var(--color-highlight);}.css-j36zmb .cm-editor{-webkit-user-select:auto;-moz-user-select:auto;-ms-user-select:auto;user-select:auto;width:100%!important;height:100%!important;}.css-j36zmb .cm-editor>*{font-family:inherit!important;}</style><style data-emotion="css hq7hwq">.css-hq7hwq{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;-webkit-box-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-box-flex-wrap:nowrap;-webkit-flex-wrap:nowrap;-ms-flex-wrap:nowrap;flex-wrap:nowrap;width:45%;height:100%;background:var(--color-bg2);padding-left:0px;padding-right:0px;padding-top:0px;padding-bottom:0px;position:relative;border-radius:8px;box-shadow:0 0 0 2px var(--color-outline);gap:0;font-family:IBM Plex Mono;overflow:hidden;font-size:var(--text-normal);-webkit-order:1;-ms-flex-order:1;order:1;z-index:20;}.css-hq7hwq:focus{box-shadow:0 0 0 2px var(--color-highlight);}.css-hq7hwq:focus-within{box-shadow:0 0 0 2px var(--color-highlight);}.css-hq7hwq .cm-editor{-webkit-user-select:auto;-moz-user-select:auto;-ms-user-select:auto;user-select:auto;width:100%!important;height:100%!important;}.css-hq7hwq .cm-editor>*{font-family:inherit!important;}</style><div class="css-hq7hwq"></div><style data-emotion="css 13w1tq4">.css-13w1tq4{-webkit-order:2;-ms-flex-order:2;order:2;-webkit-flex:1;-ms-flex:1;flex:1;z-index:20;}</style><style data-emotion="css qkr7sr">.css-qkr7sr{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;-webkit-box-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-box-flex-wrap:nowrap;-webkit-flex-wrap:nowrap;-ms-flex-wrap:nowrap;flex-wrap:nowrap;width:auto;height:100%;padding-left:0px;padding-right:0px;padding-top:0px;padding-bottom:0px;position:relative;border-radius:8px;box-shadow:none;gap:0;-webkit-order:2;-ms-flex-order:2;order:2;-webkit-flex:1;-ms-flex:1;flex:1;z-index:20;}.css-qkr7sr:focus{box-shadow:none;}</style><div class="css-qkr7sr"><style data-emotion="css yo7gkx">.css-yo7gkx{border:none;background:var(--background-bg2);border-radius:8px;width:100%;height:100%;}</style><iframe tabindex="0" srcDoc="
&lt;!DOCTYPE html&gt;
&lt;head&gt;
	&lt;style&gt;
		:root {--text-small: 16px;--text-normal: 20px;--text-big: 24px;--text-huge: 32px;--color-bg1: rgb(20, 20, 30);--color-bg2: rgb(32, 32, 46);--color-bg3: rgb(44, 44, 62);--color-bg4: rgb(56, 56, 78);--color-fg1: rgb(215, 225, 235);--color-fg2: rgb(165, 175, 190);--color-fg3: rgb(115, 125, 145);--color-fg4: rgb(65, 75, 100);--color-outline: var(--color-bg4);--color-bgpat: rgb(16, 16, 26);--color-fghl: rgb(215, 225, 235);--color-highlight: rgb(30, 140, 230);--color-accent: rgb(19, 33, 49);--color-danger: rgb(240, 90, 90);--color-errbg: rgb(40, 25, 35);}.night {--color-bg1: rgb(20, 20, 30);--color-bg2: rgb(32, 32, 46);--color-bg3: rgb(44, 44, 62);--color-bg4: rgb(56, 56, 78);--color-fg1: rgb(215, 225, 235);--color-fg2: rgb(165, 175, 190);--color-fg3: rgb(115, 125, 145);--color-fg4: rgb(65, 75, 100);--color-outline: var(--color-bg4);--color-bgpat: rgb(16, 16, 26);--color-fghl: rgb(215, 225, 235);--color-highlight: rgb(30, 140, 230);--color-accent: rgb(19, 33, 49);--color-danger: rgb(240, 90, 90);--color-errbg: rgb(40, 25, 35);}.blackhole {--color-bg1: rgb(0, 0, 0);--color-bg2: rgb(15, 15, 15);--color-bg3: rgb(30, 30, 30);--color-bg4: rgb(45, 45, 45);--color-fg1: rgb(215, 215, 215);--color-fg2: rgb(175, 175, 175);--color-fg3: rgb(135, 135, 135);--color-fg4: rgb(95, 95, 95);--color-outline: var(--color-bg4);--color-bgpat: rgb(15, 15, 15);--color-fghl: rgb(215, 215, 215);--color-highlight: rgb(30, 140, 200);--color-accent: rgb(19, 33, 49);--color-danger: rgb(255, 80, 80);--color-errbg: rgb(30, 10, 10);}.violet {--color-bg1: rgb(50, 30, 90);--color-bg2: rgb(62, 42, 105);--color-bg3: rgb(74, 54, 120);--color-bg4: rgb(86, 66, 135);--color-fg1: rgb(235, 220, 240);--color-fg2: rgb(220, 200, 230);--color-fg3: rgb(205, 180, 220);--color-fg4: rgb(190, 160, 210);--color-outline: var(--color-bg4);--color-bgpat: rgb(45, 25, 85);--color-fghl: rgb(255, 255, 255);--color-highlight: rgb(120, 120, 230);--color-accent: rgb(19, 33, 49);--color-danger: rgb(255, 90, 90);--color-errbg: rgb(30, 10, 10);}.grass {--color-bg1: rgb(20, 120, 100);--color-bg2: rgb(30, 135, 112);--color-bg3: rgb(40, 150, 124);--color-bg4: rgb(50, 165, 136);--color-fg1: rgb(220, 240, 235);--color-fg2: rgb(205, 230, 225);--color-fg3: rgb(190, 220, 215);--color-fg4: rgb(175, 210, 205);--color-outline: var(--color-bg4);--color-bgpat: rgb(10, 110, 90);--color-fghl: rgb(255, 255, 255);--color-highlight: rgb(40, 160, 160);--color-accent: rgb(19, 33, 49);--color-danger: rgb(255, 90, 90);--color-errbg: rgb(30, 10, 10);}.vibrant {--color-bg1: rgb(110, 50, 30);--color-bg2: rgb(125, 62, 42);--color-bg3: rgb(140, 74, 54);--color-bg4: rgb(155, 86, 66);--color-fg1: rgb(240, 235, 220);--color-fg2: rgb(230, 220, 205);--color-fg3: rgb(220, 205, 190);--color-fg4: rgb(210, 190, 175);--color-outline: var(--color-bg4);--color-bgpat: rgb(100, 40, 20);--color-fghl: rgb(255, 255, 255);--color-highlight: rgb(180, 120, 100);--color-accent: rgb(19, 33, 49);--color-danger: rgb(255, 90, 90);--color-errbg: rgb(30, 10, 10);}.snow {--color-bg1: rgb(250, 250, 250);--color-bg2: rgb(240, 240, 240);--color-bg3: rgb(230, 230, 230);--color-bg4: rgb(220, 220, 220);--color-fg1: rgb(60, 60, 60);--color-fg2: rgb(100, 100, 100);--color-fg3: rgb(140, 140, 140);--color-fg4: rgb(180, 180, 180);--color-outline: var(--color-bg4);--color-bgpat: rgb(240, 240, 240);--color-fghl: rgb(250, 250, 250);--color-highlight: rgb(60, 160, 240);--color-accent: rgb(19, 33, 49);--color-danger: rgb(255, 90, 90);--color-errbg: rgb(30, 10, 10);}.ice {--color-bg1: rgb(230, 240, 255);--color-bg2: rgb(220, 230, 250);--color-bg3: rgb(210, 220, 245);--color-bg4: rgb(200, 210, 240);--color-fg1: rgb(60, 65, 80);--color-fg2: rgb(95, 105, 125);--color-fg3: rgb(130, 145, 170);--color-fg4: rgb(165, 185, 215);--color-outline: var(--color-bg4);--color-bgpat: rgb(220, 230, 245);--color-fghl: rgb(250, 250, 250);--color-highlight: rgb(70, 180, 240);--color-accent: rgb(19, 33, 49);--color-danger: rgb(255, 90, 90);--color-errbg: rgb(30, 10, 10);}.spring {--color-bg1: rgb(255, 230, 240);--color-bg2: rgb(250, 220, 230);--color-bg3: rgb(245, 210, 220);--color-bg4: rgb(240, 200, 210);--color-fg1: rgb(80, 60, 65);--color-fg2: rgb(125, 95, 105);--color-fg3: rgb(170, 130, 145);--color-fg4: rgb(215, 165, 185);--color-outline: var(--color-bg4);--color-bgpat: rgb(245, 220, 230);--color-fghl: rgb(250, 250, 250);--color-highlight: rgb(30, 140, 230);--color-accent: rgb(19, 33, 49);--color-danger: rgb(255, 90, 90);--color-errbg: rgb(30, 10, 10);}
		* {
			margin: 0;
			padding: 0;
			box-sizing: border-box;
		}
		body,
		html {
			width: 100%;
			height: 100%;
		}
		body {
			background: var(--color-bg2);
		}
		canvas {
			border: solid 2px var(--color-outline);
			border-radius: 8px;
		}
		canvas:focus {
			border: solid 2px var(--color-highlight);
		}
	&lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
	&lt;script src=&quot;/dist/kaboom.js&quot;&gt;&lt;/script&gt;
	&lt;script&gt;
// Input handling and basic player movement

// Start kaboom
kaboom()

// Load assets
loadSprite(&quot;bean&quot;, &quot;/sprites/bean.png&quot;)

// Define player movement speed (pixels per second)
const SPEED = 320

// Add player game object
const player = add([
	sprite(&quot;bean&quot;),
	// center() returns the center point vec2(width() / 2, height() / 2)
	pos(center()),
])

// onKeyDown() registers an event that runs every frame as long as user is holding a certain key
onKeyDown(&quot;left&quot;, () =&gt; {
	// .move() is provided by pos() component, move by pixels per second
	player.move(-SPEED, 0)
})

onKeyDown(&quot;right&quot;, () =&gt; {
	player.move(SPEED, 0)
})

onKeyDown(&quot;up&quot;, () =&gt; {
	player.move(0, -SPEED)
})

onKeyDown(&quot;down&quot;, () =&gt; {
	player.move(0, SPEED)
})

// onClick() registers an event that runs once when left mouse is clicked
onClick(() =&gt; {
	// .moveTo() is provided by pos() component, changes the position
	player.moveTo(mousePos())
})

add([
	// text() component is similar to sprite() but renders text
	text(&quot;Press arrow keys&quot;, { width: width() / 2 }),
	pos(12, 12),
])

	&lt;/script&gt;
&lt;/body&gt;
" class="css-yo7gkx"></iframe></div></div><style data-emotion="css 1vux87n">.css-1vux87n{position:absolute;left:45%;top:-544px;-webkit-transition:0.2s top;transition:0.2s top;overflow-y:auto;overflow-x:hidden;z-index:200;}</style><style data-emotion="css l7c9yg">.css-l7c9yg{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;-webkit-box-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-box-flex-wrap:nowrap;-webkit-flex-wrap:nowrap;-ms-flex-wrap:nowrap;flex-wrap:nowrap;width:540px;height:360px;background:var(--color-bg1);padding-left:24px;padding-right:24px;padding-top:24px;padding-bottom:24px;position:relative;border-radius:8px;box-shadow:0 0 0 2px var(--color-outline);gap:0;position:absolute;left:45%;top:-544px;-webkit-transition:0.2s top;transition:0.2s top;overflow-y:auto;overflow-x:hidden;z-index:200;}.css-l7c9yg:focus{box-shadow:0 0 0 2px var(--color-highlight);}</style><div class="css-l7c9yg"></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"demos":{"add":"// Adding game objects to screen\n\n// Start a kaboom game\nkaboom()\n\n// Load a sprite asset from \"sprites/bean.png\", with the name \"bean\"\nloadSprite(\"bean\", \"/sprites/bean.png\")\nloadSprite(\"ghosty\", \"/sprites/ghosty.png\")\n\n// A \"Game Object\" is the basic unit of entity in kaboom\n// Game objects are composed from components\n// Each component gives a game object certain capabilities\n\n// add() assembles a game object from a list of components and add to game, returns the reference of the game object\nconst player = add([\n\tsprite(\"bean\"),   // sprite() component makes it render as a sprite\n\tpos(120, 80),     // pos() component gives it position, also enables movement\n\trotate(0),        // rotate() component gives it rotation\n\torigin(\"center\"), // origin() component defines the pivot point (defaults to \"topleft\")\n])\n\n// .onUpdate() is a method on all game objects, it registers an event that runs every frame\nplayer.onUpdate(() =\u003e {\n\t// .angle is a property provided by rotate() component, here we're incrementing the angle by 120 degrees per second, dt() is the time elapsed since last frame in seconds\n\tplayer.angle += 120 * dt()\n})\n\n// Add multiple game objects\nfor (let i = 0; i \u003c 3; i++) {\n\n\t// generate a random point on screen\n\t// width() and height() gives the game dimension\n\tconst x = rand(0, width())\n\tconst y = rand(0, height())\n\n\tadd([\n\t\tsprite(\"ghosty\"),\n\t\tpos(x, y),\n\t])\n\n}\n","ai":"// Use state() component to handle basic AI\n\n// Start kaboom\nkaboom()\n\n// Load assets\nloadSprite(\"bean\", \"/sprites/bean.png\")\nloadSprite(\"ghosty\", \"/sprites/ghosty.png\")\n\nconst SPEED = 320\nconst ENEMY_SPEED = 160\nconst BULLET_SPEED = 800\n\n// Add player game object\nconst player = add([\n\tsprite(\"bean\"),\n\tpos(80, 80),\n\tarea(),\n\torigin(\"center\"),\n])\n\nconst enemy = add([\n\tsprite(\"ghosty\"),\n\tpos(width() - 80, height() - 80),\n\torigin(\"center\"),\n\t// This enemy cycle between 3 states, and start from \"idle\" state\n\tstate(\"move\", [ \"idle\", \"attack\", \"move\", ]),\n])\n\n// Run the callback once every time we enter \"idle\" state.\n// Here we stay \"idle\" for 0.5 second, then enter \"attack\" state.\nenemy.onStateEnter(\"idle\", async () =\u003e {\n\tawait wait(0.5)\n\tenemy.enterState(\"attack\")\n})\n\n// When we enter \"attack\" state, we fire a bullet, and enter \"move\" state after 1 sec\nenemy.onStateEnter(\"attack\", async () =\u003e {\n\n\t// Don't do anything if player doesn't exist anymore\n\tif (player.exists()) {\n\n\t\tconst dir = player.pos.sub(enemy.pos).unit()\n\n\t\tadd([\n\t\t\tpos(enemy.pos),\n\t\t\tmove(dir, BULLET_SPEED),\n\t\t\trect(12, 12),\n\t\t\tarea(),\n\t\t\tcleanup(),\n\t\t\torigin(\"center\"),\n\t\t\tcolor(BLUE),\n\t\t\t\"bullet\",\n\t\t])\n\n\t}\n\n\tawait wait(1)\n\tenemy.enterState(\"move\")\n\n})\n\nenemy.onStateEnter(\"move\", async () =\u003e {\n\tawait wait(2)\n\tenemy.enterState(\"idle\")\n})\n\n// Like .onUpdate() which runs every frame, but only runs when the current state is \"move\"\n// Here we move towards the player every frame if the current state is \"move\"\nenemy.onStateUpdate(\"move\", () =\u003e {\n\tif (!player.exists()) return\n\tconst dir = player.pos.sub(enemy.pos).unit()\n\tenemy.move(dir.scale(ENEMY_SPEED))\n})\n\n// Have to manually call enterState() to trigger the onStateEnter(\"move\") event we defined above.\nenemy.enterState(\"move\")\n\n// Taking a bullet makes us disappear\nplayer.onCollide(\"bullet\", (bullet) =\u003e {\n\tdestroy(bullet)\n\tdestroy(player)\n\taddKaboom(bullet.pos)\n})\n\n// Register input handlers \u0026 movement\nonKeyDown(\"left\", () =\u003e {\n\tplayer.move(-SPEED, 0)\n})\n\nonKeyDown(\"right\", () =\u003e {\n\tplayer.move(SPEED, 0)\n})\n\nonKeyDown(\"up\", () =\u003e {\n\tplayer.move(0, -SPEED)\n})\n\nonKeyDown(\"down\", () =\u003e {\n\tplayer.move(0, SPEED)\n})\n","audio":"// audio playback \u0026 control\n\nkaboom()\n\nloadSound(\"bell\", \"/sounds/bell.mp3\")\nloadSound(\"OtherworldlyFoe\", \"/sounds/OtherworldlyFoe.mp3\")\n\n// play() to play audio\n// (This might not play until user input due to browser policy)\nconst music = play(\"OtherworldlyFoe\", {\n\tloop: true,\n})\n\n// Adjust global volume\nvolume(0.5)\n\nconst label = add([\n\ttext(),\n])\n\nfunction updateText() {\n\tlabel.text = `\n${music.isPaused() ? \"Paused\" : \"Playing\"}\nTime: ${music.time().toFixed(2)}\nTolume: ${music.volume().toFixed(2)}\nTetune: ${music.detune().toFixed(2)}\n\t`.trim()\n}\n\nupdateText()\n\n// Update text every frame\nonUpdate(updateText)\n\n// Adjust music properties through input\nonKeyPress(\"space\", () =\u003e {\n\tif (music.isPaused()) {\n\t\tmusic.play()\n\t} else {\n\t\tmusic.pause()\n\t}\n})\n\nonKeyPress(\"up\", () =\u003e music.volume(music.volume() + 0.1))\nonKeyPress(\"down\", () =\u003e music.volume(music.volume() - 0.1))\nonKeyPress(\"left\", () =\u003e music.detune(music.detune() - 100))\nonKeyPress(\"right\", () =\u003e music.detune(music.detune() + 100))\nonKeyPress(\"escape\", () =\u003e music.stop())\n\nconst keyboard = \"awsedftgyhujk\"\n\n// Simple piano with \"bell\" sound and the second row of a QWERTY keyboard\nfor (let i = 0; i \u003c keyboard.length; i++) {\n\tonKeyPress(keyboard[i], () =\u003e {\n\t\tplay(\"bell\", {\n\t\t\t// The original \"bell\" sound is F, -500 will make it C for the first key\n\t\t\tdetune: i * 100 - 500,\n\t\t})\n\t})\n}\n","burp":"// Start the game in burp mode\nkaboom({\n\tburp: true\n})\n\n// \"b\" triggers a burp in burp mode\nadd([\n\ttext(\"press b\"),\n])\n\n// burp() on click / tap for our friends on mobile\nonClick(burp)\n","button":"// Simple Button UI\n\nkaboom()\n\nfunction addButton(txt, p, f) {\n\n\tconst btn = add([\n\t\ttext(txt),\n\t\tpos(p),\n\t\tarea({ cursor: \"pointer\", }),\n\t\tscale(1),\n\t\torigin(\"center\"),\n\t])\n\n\tbtn.onClick(f)\n\n\tbtn.onUpdate(() =\u003e {\n\t\tif (btn.isHovering()) {\n\t\t\tconst t = time() * 10\n\t\t\tbtn.color = rgb(\n\t\t\t\twave(0, 255, t),\n\t\t\t\twave(0, 255, t + 2),\n\t\t\t\twave(0, 255, t + 4),\n\t\t\t)\n\t\t\tbtn.scale = vec2(1.2)\n\t\t} else {\n\t\t\tbtn.scale = vec2(1)\n\t\t\tbtn.color = rgb()\n\t\t}\n\t})\n\n}\n\naddButton(\"Start\", vec2(200, 100), () =\u003e debug.log(\"oh hi\"))\naddButton(\"Quit\", vec2(200, 200), () =\u003e debug.log(\"bye\"))\n\n// reset cursor to default at frame start for easier cursor management\nonUpdate(() =\u003e cursor(\"default\"))\n","camera":"// Adjust camera / viewport\n\n// Start game\nkaboom()\n\n// Load assets\nloadSprite(\"bean\", \"/sprites/bean.png\")\nloadSprite(\"coin\", \"/sprites/coin.png\")\nloadSprite(\"grass\", \"/sprites/grass.png\")\nloadSound(\"score\", \"/sounds/score.mp3\")\n\nconst SPEED = 480\n\ngravity(2400)\n\n// Setup a basic level\nconst level = addLevel([\n\t\"@  =  $\",\n\t\"=======\",\n], {\n\twidth: 64,\n\theight: 64,\n\tpos: vec2(100, 200),\n\t\"@\": () =\u003e [\n\t\tsprite(\"bean\"),\n\t\tarea(),\n\t\tbody(),\n\t\torigin(\"bot\"),\n\t\t\"player\",\n\t],\n\t\"=\": () =\u003e [\n\t\tsprite(\"grass\"),\n\t\tarea(),\n\t\tsolid(),\n\t\torigin(\"bot\"),\n\t],\n\t\"$\": () =\u003e [\n\t\tsprite(\"coin\"),\n\t\tarea(),\n\t\torigin(\"bot\"),\n\t\t\"coin\",\n\t],\n})\n\n// Get the player object from tag\nconst player = get(\"player\")[0]\n\nplayer.onUpdate(() =\u003e {\n\t// Set the viewport center to player.pos\n\tcamPos(player.pos)\n})\n\nplayer.onCollide(\"coin\", (coin) =\u003e {\n\tdestroy(coin)\n\tplay(\"score\")\n\tscore++\n\t// Zoooom in!\n\tcamScale(2)\n})\n\n// Movements\nonKeyPress(\"space\", () =\u003e {\n\tif (player.isGrounded()) {\n\t\tplayer.jump()\n\t}\n})\n\nonKeyDown(\"left\", () =\u003e player.move(-SPEED, 0))\nonKeyDown(\"right\", () =\u003e player.move(SPEED, 0))\n\nlet score = 0\n\n// Add a score counter\nadd([\n\ttext(\"0\"),\n\tpos(12),\n\t// Use fixed() component to make the object not affected by camera\n\tfixed(),\n\t{ update() { this.text = score } },\n])\n\nonClick(() =\u003e {\n\t// Use toWorld() to transform a screen-space coordinate (like mousePos()) to the world-space coordinate, which has the camera transform applied\n\tconst worldMousePos = toWorld(mousePos())\n\taddKaboom(worldMousePos)\n})\n","children":"// NOTE: children game obj is not usable yet, will come in next major release!\n\nkaboom()\n\nloadSprite(\"bean\", \"/sprites/bean.png\")\nloadSprite(\"ghosty\", \"/sprites/ghosty.png\")\n\nconst nucleus = add([\n  sprite(\"ghosty\"),\n  pos(center()),\n  origin(\"center\"),\n])\n\n// Add children\nfor (let i = 12; i \u003c 24; i++) {\n\n  nucleus.add([\n    sprite(\"bean\"),\n    rotate(0),\n    origin(vec2(i).scale(0.25)),\n    {\n      speed: i * 8,\n    },\n  ])\n\n}\n\nnucleus.onUpdate(() =\u003e {\n\n  nucleus.pos = mousePos()\n\n  // update children\n  nucleus.children.forEach((child) =\u003e {\n    child.angle += child.speed * dt()\n  })\n\n})\n","collision":"// Collision handling\n\n// Start kaboom\nkaboom()\n\n// Load assets\nloadSprite(\"bean\", \"/sprites/bean.png\")\nloadSprite(\"ghosty\", \"/sprites/ghosty.png\")\nloadSprite(\"grass\", \"/sprites/grass.png\")\n\n// Define player movement speed\nconst SPEED = 320\n\n// Add player game object\nconst player = add([\n\tsprite(\"bean\"),\n\tpos(80, 40),\n\tcolor(),\n\t// area() component gives the object a collider, which enables collision checking\n\tarea(),\n\t// solid() component makes the object can't move pass other solid objects\n\tsolid(),\n])\n\n// Register input handlers \u0026 movement\nonKeyDown(\"left\", () =\u003e {\n\tplayer.move(-SPEED, 0)\n})\n\nonKeyDown(\"right\", () =\u003e {\n\tplayer.move(SPEED, 0)\n})\n\nonKeyDown(\"up\", () =\u003e {\n\tplayer.move(0, -SPEED)\n})\n\nonKeyDown(\"down\", () =\u003e {\n\tplayer.move(0, SPEED)\n})\n\n// Add enemies\nfor (let i = 0; i \u003c 3; i++) {\n\n\tconst x = rand(0, width())\n\tconst y = rand(0, height())\n\n\tadd([\n\t\tsprite(\"ghosty\"),\n\t\tpos(x, y),\n\t\t// Both objects must have area() component to enable collision detection between\n\t\tarea(),\n\t\t\"enemy\",\n\t])\n\n}\n\nadd([\n\tsprite(\"grass\"),\n\tpos(center()),\n\tarea(),\n\t// This game object also has solid(), so our player won't be able to move pass this\n\tsolid(),\n])\n\n// .onCollide() is provided by area() component, it registers an event that runs when an objects collides with another object with certain tag\n// In this case we destroy (remove from game) the enemy when player hits one\nplayer.onCollide(\"enemy\", (enemy) =\u003e {\n\tdestroy(enemy)\n})\n\n// .clicks() is provided by area() component, it registers an event that runs when the object is clicked\nplayer.onClick(() =\u003e {\n\tdebug.log(\"what up\")\n})\n\nplayer.onUpdate(() =\u003e {\n\t// .isHovering() is provided by area() component, which returns a boolean of if the object is currently being hovered on\n\tif (player.isHovering()) {\n\t\tplayer.color = rgb(0, 0, 255)\n\t} else {\n\t\tplayer.color = rgb()\n\t}\n})\n\n// Enter inspect mode, which shows the collider outline of each object with area() component, handy for debugging\n// Can also be toggled by pressing F1\ndebug.inspect = true\n\n// Check out https://kaboomjs.com#AreaComp for everything area() provides\n","component":"// Custom component\n\nkaboom()\n\nloadSprite(\"bean\", \"/sprites/bean.png\")\n\n// Components are just functions that returns an object that follows a certain format\nfunction funky() {\n\n\t// Can use local closed variables to store component state\n\tlet isFunky = false\n\n\treturn {\n\n\t\t// ------------------\n\t\t// Special properties that controls the behavior of the component (all optional)\n\n\t\t// The name of the component\n\t\tid: \"funky\",\n\t\t// If this component depend on any other components\n\t\trequire: [ \"scale\", \"color\", ],\n\n\t\t// Runs when the host object is added to the game\n\t\tadd() {\n\t\t\t// E.g. Register some events from other components, do some bookkeeping, etc.\n\t\t},\n\n\t\t// Runs every frame as long as the host object exists\n\t\tupdate() {\n\n\t\t\tif (!isFunky) return\n\n\t\t\t// \"this\" in all component methods refers to the host game object\n\t\t\t// Here we're updating some properties provided by other components\n\t\t\tthis.color = rgb(rand(0, 255), rand(0, 255), rand(0, 255))\n\t\t\tthis.scale = rand(1, 2)\n\n\t\t},\n\n\t\t// Runs every frame (after update) as long as the host object exists\n\t\tdraw() {\n\t\t\t// E.g. Custom drawXXX() operations.\n\t\t},\n\n\t\t// Runs when the host object is destroyed\n\t\tdestroy() {\n\t\t\t// E.g. Clean up event handlers, etc.\n\t\t},\n\n\t\t// Get the info to present in inspect mode\n\t\tinspect() {\n\t\t\treturn isFunky ? \"on\" : \"off\"\n\t\t},\n\n\t\t// ------------------\n\t\t// All other properties and methods are directly assigned to the host object\n\n\t\tgetFunky() {\n\t\t\tisFunky = true\n\t\t},\n\n\t}\n\n}\n\nconst bean = add([\n\tsprite(\"bean\"),\n\tpos(center()),\n\torigin(\"center\"),\n\tscale(1),\n\tcolor(),\n\tarea(),\n\t// Use our component here\n\tfunky(),\n\t// Tags are empty components, it's equivalent to a { id: \"friend\" }\n\t\"friend\",\n\t// Plain objects here are components too and work the same way, except unamed\n\t{\n\t\tcoolness: 100,\n\t\tfriends: [],\n\t},\n])\n\nonKeyPress(\"space\", () =\u003e {\n\t// .coolness is from our unamed component above\n\tif (bean.coolness \u003e= 100) {\n\t\t// We can use .getFunky() provided by the funky() component now\n\t\tbean.getFunky()\n\t}\n})\n\nonKeyPress(\"r\", () =\u003e {\n\t// .use() is on every game object, it adds a component at runtime\n\tbean.use(rotate(180))\n})\n\nadd([\n\ttext(\"Press space to get funky\", { width: width() }),\n\tpos(12, 12),\n])\n","concert":"// bean is holding a concert to celebrate kaboom2000!\n\nkaboom({\n\tscale: 0.7,\n\tbackground: [ 128, 180, 255 ],\n})\n\nloadSprite(\"bean\", \"/sprites/bean.png\")\nloadSprite(\"bag\", \"/sprites/bag.png\")\nloadSprite(\"bobo\", \"/sprites/bobo.png\")\nloadSprite(\"onion\", \"/sprites/onion.png\")\nloadSprite(\"ghosty\", \"/sprites/ghosty.png\")\nloadSprite(\"lamp\", \"/sprites/lamp.png\")\nloadSprite(\"goldfly\", \"/sprites/goldfly.png\")\nloadSprite(\"gigagantrum\", \"/sprites/gigagantrum.png\")\nloadSprite(\"note\", \"/sprites/note.png\")\nloadSprite(\"grass\", \"/sprites/grass.png\")\nloadSprite(\"cloud\", \"/sprites/cloud.png\")\nloadSprite(\"sun\", \"/sprites/sun.png\")\nloadSound(\"bell\", \"/sounds/bell.mp3\")\nloadSound(\"kaboom2000\", \"/sounds/kaboom2000.mp3\")\n\nconst FLOOR_HEIGHT = 64\nconst JUMP_FORCE = 1320\nconst CAPTION_SPEED = 340\nconst PLAYER_SPEED = 640\n\nlet started = false\nlet music = null\nlet burping = false\n\n// define gravity\ngravity(2400)\n\n// add a game object to screen\nconst player = add([\n\t// list of components\n\tsprite(\"bean\"),\n\tpos(width() / 2, height() - FLOOR_HEIGHT),\n\tarea(),\n\tbody(),\n\torigin(\"bot\"),\n\tz(100),\n])\n\nconst gw = 200\nconst gh = 140\nconst maxRow = 4\nconst notes = [ 0, 2, 4, 5, 6, 7, 8, 9, 11, 12, ]\n\nfor (let i = 1; i \u003c= maxRow; i++) {\n\tfor (let j = 0; j \u003c i; j++) {\n\t\tconst n = i * (i - 1) / 2 + j\n\t\tconst w = (i - 1) * gw + 64\n\t\tadd([\n\t\t\tsprite(\"note\"),\n\t\t\tpos(j * gw + (width() - w) / 2 + 32, height() - FLOOR_HEIGHT + 24 - (maxRow - i + 1) * gh),\n\t\t\tarea(),\n\t\t\tsolid(),\n\t\t\torigin(\"bot\"),\n\t\t\t// note: hsl2rgb is not released yet!\n\t\t\tcolor(hsl2rgb((n * 20) / 255, 0.6, 0.7)),\n\t\t\tbounce(),\n\t\t\tscale(1),\n\t\t\tn === 0 ? \"burp\" : \"note\",\n\t\t\t{ detune: notes[9 - n] * 100 + -800, },\n\t\t])\n\t}\n}\n\nfunction bounce() {\n\tlet bouncing = false\n\tlet timer = 0\n\treturn {\n\t\tid: \"bounce\",\n\t\trequire: [ \"scale\" ],\n\t\tupdate() {\n\t\t\tif (bouncing) {\n\t\t\t\ttimer += dt() * 20\n\t\t\t\tconst w = Math.sin(timer) * 0.1\n\t\t\t\tif (w \u003c 0) {\n\t\t\t\t\tbouncing = false\n\t\t\t\t\ttimer = 0\n\t\t\t\t} else {\n\t\t\t\t\tthis.scale = vec2(1 + w)\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tbounce() {\n\t\t\tbouncing = true\n\t\t},\n\t}\n}\n\n// floor\nfor (let x = 0; x \u003c width(); x += 64) {\n\tadd([\n\t\tpos(x, height()),\n\t\tsprite(\"grass\"),\n\t\torigin(\"botleft\"),\n\t\tarea(),\n\t\tsolid(),\n\t])\n}\n\nfunction jump() {\n\tif (player.isGrounded()) {\n\t\tplayer.jump(JUMP_FORCE)\n\t}\n}\n\n// jump when user press space\nonKeyPress([\"space\", \"up\"], jump)\nonKeyDown(\"left\", () =\u003e player.move(-PLAYER_SPEED, 0))\nonKeyDown(\"right\", () =\u003e player.move(PLAYER_SPEED, 0))\n\nplayer.onHeadbutt((block) =\u003e {\n\tif (block.is(\"note\")) {\n\t\tplay(\"bell\", {\n\t\t\tdetune: block.detune,\n\t\t\tvolume: 0.1\n\t\t})\n\t\taddKaboom(block.pos)\n\t\tshake(1)\n\t\tblock.bounce()\n\t\tif (!started) {\n\t\t\tstarted = true\n\t\t\tcaption.hidden = false\n\t\t\tcaption.paused = false\n\t\t\tmusic = play(\"kaboom2000\")\n\t\t}\n\t} else if (block.is(\"burp\")) {\n\t\tburp()\n\t\tshake(480)\n\t\tif (music) music.stop()\n\t\tburping = true\n\t\tplayer.paused = true\n\t}\n})\n\nonUpdate(() =\u003e {\n\tif (!burping) return\n\tcamPos(camPos().lerp(player.pos, dt() * 3))\n\tcamScale(camScale().lerp(vec2(5), dt() * 3))\n})\n\nconst lyrics = \"kaboom2000 is out today, i have to go and try it out now... oh it's so fun it's so fun it's so fun...... it's so fun it's so fun it's so fun!\"\n\nconst caption = add([\n\ttext(lyrics, {\n\t\t// note: character transform is not released yet!\n\t\ttransform(idx, ch) {\n\t\t\treturn {\n\t\t\t\tcolor: hsl2rgb(((time() * 60 + idx * 20) % 255) / 255, 0.7, 0.8),\n\t\t\t\tscale: wave(1, 1.2, time() * 3 + idx),\n\t\t\t\tangle: wave(-9, 9, time() * 3 + idx),\n\t\t\t}\n\t\t},\n\t}),\n\tpos(width(), 32),\n\tmove(LEFT, CAPTION_SPEED),\n])\n\ncaption.hidden = true\ncaption.paused = true\n\nconst guys = [\n\t\"bag\",\n\t\"bobo\",\n\t\"onion\",\n\t\"ghosty\",\n\t\"lamp\",\n\t\"gigagantrum\",\n\t\"goldfly\",\n]\n\nfunction funky() {\n\tlet timer = 0\n\treturn {\n\t\tid: \"funky\",\n\t\trequire: [ \"pos\", \"rotate\", ],\n\t\tupdate() {\n\t\t\ttimer += dt()\n\t\t\tthis.angle = wave(-9, 9, timer * 4)\n\t\t},\n\t}\n}\n\nfunction spawnCloud() {\n\n\tconst dir = choose([LEFT, RIGHT])\n\n\tadd([\n\t\tsprite(\"cloud\", { flipX: dir.eq(LEFT) }),\n\t\tmove(dir, rand(20, 60)),\n\t\tcleanup(),\n\t\tpos(dir.eq(LEFT) ? width() : 0, rand(-20, 480)),\n\t\torigin(\"top\"),\n\t\tarea(),\n\t\tz(-50),\n\t])\n\n\twait(rand(6, 12), spawnCloud)\n\n}\n\nfunction spawnFriend() {\n\n\tconst guy = choose(guys)\n\tconst dir = choose([LEFT, RIGHT])\n\n\tadd([\n\t\tsprite(guy, { flipX: dir.eq(LEFT) }),\n\t\tmove(dir, rand(120, 320)),\n\t\tcleanup(),\n\t\tpos(dir.eq(LEFT) ? width() : 0, height() - FLOOR_HEIGHT),\n\t\tarea(),\n\t\trotate(),\n\t\tfunky(),\n\t\torigin(\"bot\"),\n\t\tz(50),\n\t])\n\n\twait(rand(1, 3), spawnFriend)\n\n}\n\nspawnCloud()\nspawnFriend()\n\nconst sun = add([\n\tsprite(\"sun\"),\n\torigin(\"center\"),\n\tpos(width() - 90, 90),\n\trotate(),\n\tz(-100),\n])\n\nsun.onUpdate(() =\u003e {\n\tsun.angle += dt() * 12\n})\n","dialog":"// Simple dialogues\n\nkaboom({\n\tbackground: [ 255, 209, 253 ]\n})\n\nloadSprite(\"bean\", \"/sprites/bean.png\")\nloadSprite(\"mark\", \"/sprites/mark.png\")\n\n// Define the dialogue data\nconst dialogs = [\n\t[ \"bean\", \"hi my butterfly\" ],\n\t[ \"bean\", \"i love u\" ],\n\t[ \"bean\", \"you love me? pretty baby\" ],\n\t[ \"bean\", \"mark is a stupid\" ],\n\t[ \"bean\", \"he did not know how to take care of you...\" ],\n\t[ \"mark\", \"you don't know me ...\" ],\n\t[ \"bean\", \"what! mark???\" ],\n\t[ \"mark\", \"oh...hi \" ],\n]\n\nlet curDialog = 0\n\n// Text bubble\nconst textbox = add([\n\trect(width() - 200, 120, { radius: 32 }),\n\torigin(\"center\"),\n\tpos(center().x, height() - 100),\n\toutline(2),\n])\n\n// Text\nconst txt = add([\n\ttext(\"\", { size: 32, width: width() - 230 }),\n\tpos(textbox.pos),\n\torigin(\"center\")\n])\n\n// Character avatar\nconst avatar = add([\n\tsprite(\"bean\"),\n\tscale(3),\n\torigin(\"center\"),\n\tpos(center().sub(0, 50))\n])\n\nonKeyPress(\"space\", () =\u003e {\n\t// Cycle through the dialogs\n\tcurDialog = (curDialog + 1) % dialogs.length\n\tupdateDialog()\n})\n\n// Update the on screen sprite \u0026 text\nfunction updateDialog() {\n\n\tconst [ char, dialog ] = dialogs[curDialog]\n\n\t// Use a new sprite component to replace the old one\n\tavatar.use(sprite(char))\n\t// Update the dialog text\n\ttxt.text = dialog\n\n}\n\nupdateDialog()\n","doublejump":"kaboom()\n\nloadSprite(\"bean\", \"/sprites/bean.png\")\nloadSprite(\"coin\", \"/sprites/coin.png\")\nloadSprite(\"grass\", \"/sprites/grass.png\")\nloadSprite(\"spike\", \"/sprites/spike.png\")\nloadSound(\"coin\", \"/sounds/score.mp3\")\n\nconst PLAYER_SPEED = 640\nconst JUMP_FORCE = 1200\nconst NUM_PLATFORMS = 5\n\n// a spinning component for fun\nfunction spin(speed = 1200) {\n\tlet spinning = false\n\treturn {\n\t\trequire: [ \"rotate\", ],\n\t\tupdate() {\n\t\t\tif (!spinning) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\tthis.angle -= speed * dt()\n\t\t\tif (this.angle \u003c= -360) {\n\t\t\t\tspinning = false\n\t\t\t\tthis.angle = 0\n\t\t\t}\n\t\t},\n\t\tspin() {\n\t\t\tspinning = true\n\t\t},\n\t}\n}\n\nscene(\"game\", () =\u003e {\n\n\tgravity(4000)\n\n\tconst score = add([\n\t\ttext(\"0\", 24),\n\t\tpos(24, 24),\n\t\t{\n\t\t\tvalue: 0,\n\t\t},\n\t])\n\n\tconst bean = add([\n\t\tsprite(\"bean\"),\n\t\tarea(),\n\t\torigin(\"center\"),\n\t\tpos(0, 0),\n\t\tbody({ jumpForce: JUMP_FORCE, }),\n\t\trotate(0),\n\t\tspin(),\n\t])\n\n\tfor (let i = 1; i \u003c NUM_PLATFORMS; i++) {\n\t\tadd([\n\t\t\tsprite(\"grass\"),\n\t\t\tarea(),\n\t\t\tpos(rand(0, width()), i * height() / NUM_PLATFORMS),\n\t\t\tsolid(),\n\t\t\torigin(\"center\"),\n\t\t\t\"platform\",\n\t\t\t{\n\t\t\t\tspeed: rand(120, 320),\n\t\t\t\tdir: choose([-1, 1]),\n\t\t\t},\n\t\t])\n\t}\n\n\t// go to the first platform\n\tbean.pos = get(\"platform\")[0].pos.sub(0, 64)\n\n\tfunction genCoin(avoid) {\n\t\tconst plats = get(\"platform\")\n\t\tlet idx = randi(0, plats.length)\n\t\t// avoid the spawning on the same platforms\n\t\tif (avoid != null) {\n\t\t\tidx = choose([...plats.keys()].filter((i) =\u003e i !== avoid))\n\t\t}\n\t\tconst plat = plats[idx]\n\t\tadd([\n\t\t\tpos(),\n\t\t\torigin(\"center\"),\n\t\t\tsprite(\"coin\"),\n\t\t\tarea(),\n\t\t\tfollow(plat, vec2(0, -60)),\n\t\t\t\"coin\",\n\t\t\t{ idx: idx, },\n\t\t])\n\t}\n\n\tgenCoin(0)\n\n\tfor (let i = 0; i \u003c width() / 64; i++) {\n\t\tadd([\n\t\t\tpos(i * 64, height()),\n\t\t\tsprite(\"spike\"),\n\t\t\tarea(),\n\t\t\torigin(\"bot\"),\n\t\t\tscale(),\n\t\t\t\"danger\",\n\t\t])\n\t}\n\n\tbean.onCollide(\"danger\", () =\u003e {\n\t\tgo(\"lose\")\n\t})\n\n\tbean.onCollide(\"coin\", (c) =\u003e {\n\t\tdestroy(c)\n\t\tplay(\"coin\")\n\t\tscore.value += 1\n\t\tscore.text = score.value\n\t\tgenCoin(c.idx)\n\t})\n\n\t// spin on double jump\n\tbean.onDoubleJump(() =\u003e {\n\t\tbean.spin()\n\t})\n\n\tonUpdate(\"platform\", (p) =\u003e {\n\t\tp.move(p.dir * p.speed, 0)\n\t\tif (p.pos.x \u003c 0 || p.pos.x \u003e width()) {\n\t\t\tp.dir = -p.dir\n\t\t}\n\t})\n\n\tonKeyPress(\"space\", () =\u003e {\n\t\tbean.doubleJump()\n\t})\n\n\t// both keys will trigger\n\tonKeyDown(\"left\", () =\u003e {\n\t\tbean.move(-PLAYER_SPEED, 0)\n\t})\n\n\tonKeyDown(\"right\", () =\u003e {\n\t\tbean.move(PLAYER_SPEED, 0)\n\t})\n\n\tlet time = 30\n\n\tconst timer = add([\n\t\torigin(\"topright\"),\n\t\tpos(width() - 24, 24),\n\t\ttext(time),\n\t])\n\n\tonUpdate(() =\u003e {\n\t\ttime -= dt()\n\t\tif (time \u003c= 0) {\n\t\t\tgo(\"win\", score.value)\n\t\t}\n\t\ttimer.text = time.toFixed(2)\n\t})\n\n})\n\nscene(\"win\", (score) =\u003e {\n\n\tadd([\n\t\tsprite(\"bean\"),\n\t\tpos(width() / 2, height() / 2 - 80),\n\t\tscale(2),\n\t\torigin(\"center\"),\n\t])\n\n\t// display score\n\tadd([\n\t\ttext(score),\n\t\tpos(width() / 2, height() / 2 + 80),\n\t\tscale(2),\n\t\torigin(\"center\"),\n\t])\n\n\t// go back to game with space is pressed\n\tonKeyPress(\"space\", () =\u003e go(\"game\"))\n\n})\n\nscene(\"lose\", () =\u003e {\n\tadd([\n\t\ttext(\"You Lose\"),\n\t])\n\tonKeyPress(\"space\", () =\u003e {\n\t\tgo(\"game\")\n\t})\n})\n\ngo(\"game\")\n","drag":"// Drag \u0026 drop interaction\n\nkaboom()\n\nloadSprite(\"bean\", \"/sprites/bean.png\")\n\n// Keep track of the current draggin item\nlet curDraggin = null\n\n// A custom component for handling drag \u0026 drop behavior\nfunction drag() {\n\n\t// The displacement between object pos and mouse pos\n\tlet offset = vec2(0)\n\n\treturn {\n\t\t// Name of the component\n\t\tid: \"drag\",\n\t\t// This component requires the \"pos\" and \"area\" component to work\n\t\trequire: [ \"pos\", \"area\", ],\n\t\t// \"add\" is a lifecycle method gets called when the obj is added to scene\n\t\tadd() {\n\t\t\t// TODO: these need to be checked in reverse order\n\t\t\t// \"this\" in all methods refer to the obj\n\t\t\tthis.onClick(() =\u003e {\n\t\t\t\tif (curDraggin) {\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tcurDraggin = this\n\t\t\t\toffset = mousePos().sub(this.pos)\n\t\t\t\t// Remove the object and re-add it, so it'll be drawn on top\n\t\t\t\treadd(this)\n\t\t\t})\n\t\t},\n\t\t// \"update\" is a lifecycle method gets called every frame the obj is in scene\n\t\tupdate() {\n\t\t\tif (curDraggin === this) {\n\t\t\t\tcursor(\"move\")\n\t\t\t\tthis.pos = mousePos().sub(offset)\n\t\t\t}\n\t\t},\n\t}\n\n}\n\n// drop\nonMouseRelease(() =\u003e {\n\tcurDraggin = null\n})\n\n// adding dragable objects\nfor (let i = 0; i \u003c 48; i++) {\n\tadd([\n\t\tsprite(\"bean\"),\n\t\tpos(rand(width()), rand(height())),\n\t\tarea(),\n\t\tscale(5),\n\t\torigin(\"center\"),\n\t\t// using our custom component here\n\t\tdrag(),\n\t\ti !== 0 ? color(255, 255, 255) : color(255, 0, 255),\n\t])\n}\n\n// reset cursor to default at frame start for easier cursor management\nonUpdate(() =\u003e cursor(\"default\"))\n","draw":"// Kaboom as pure rendering lib (no component / game obj etc.)\n\nkaboom()\nloadSprite(\"bean\", \"/sprites/bean.png\")\n\nconst t = (n = 1) =\u003e time() * n\nconst w = (a, b, n) =\u003e wave(a, b, t(n))\nconst px = 160\nconst py = 200\nconst doodles = []\nconst trail = []\n\nconst outline = {\n\twidth: 4,\n\tcolor: rgb(0, 0, 0),\n}\n\n// onDraw() is similar to onUpdate(), it runs every frame, but after all update events.\n// All drawXXX() functions need to be called every frame if you want them to persist\nonDraw(() =\u003e {\n\n\tconst mx = (width() - px * 2) / 2\n\tconst my = (height() - py * 2) / 1\n\tconst p = (x, y) =\u003e vec2(x, y).scale(mx, my).add(px, py)\n\n\t// When \"space\" key is down, rotate the whole canvas from the center\n\tif (isKeyDown(\"space\")) {\n\t\tpushTransform()\n\t\tpushTranslate(width() / 2, height() / 2)\n\t\tpushRotate(t(240))\n\t\tpushTranslate(-width() / 2, -height() / 2)\n\t}\n\n\tdrawSprite({\n\t\tsprite: \"bean\",\n\t\tpos: p(0, 0),\n\t\tangle: t(40),\n\t\torigin: \"center\",\n\t\tscale: w(1, 1.5, 4),\n\t\tcolor: rgb(w(128, 255, 4), w(128, 255, 8), 255),\n\t})\n\n\tdrawRect({\n\t\tpos: p(1, 0),\n\t\twidth: w(60, 120, 4),\n\t\theight: w(100, 140, 8),\n\t\torigin: \"center\",\n\t\tradius: w(0, 32, 4),\n\t\tangle: t(80),\n\t\tcolor: rgb(w(128, 255, 4), 255, w(128, 255, 8)),\n\t\toutline,\n\t})\n\n\tdrawEllipse({\n\t\tpos: p(2, 0),\n\t\tradiusX: w(40, 70, 2),\n\t\tradiusY: w(40, 70, 4),\n\t\tstart: 0,\n\t\tend: w(180, 360, 1),\n\t\tcolor: rgb(255, w(128, 255, 8), w(128, 255, 4)),\n\t\toutline,\n\t})\n\n\tdrawPolygon({\n\t\tpos: p(0, 1),\n\t\tpts: [\n\t\t\tvec2(w(-10, 10, 2), -80),\n\t\t\tvec2(80, w(-10, 10, 4)),\n\t\t\tvec2(w(30, 50, 4), 80),\n\t\t\tvec2(-30, w(50, 70, 2)),\n\t\t\tvec2(w(-50, -70, 4), 0),\n\t\t],\n\t\tcolor: rgb(w(128, 255, 8), 255, w(128, 255, 4)),\n\t\toutline,\n\t})\n\n\tdrawText({\n\t\ttext: \"yo\",\n\t\tpos: p(1, 1),\n\t\torigin: \"center\",\n\t\tsize: w(80, 120, 2),\n\t\tcolor: rgb(w(128, 255, 4), w(128, 255, 8), w(128, 255, 2)),\n\t})\n\n\t// TODO: show a custom shader quad here\n\n\t// pop to not affect the mouse trail and draw\n\tif (isKeyDown(\"space\")) {\n\t\tpopTransform()\n\t}\n\n\tdrawLines({\n\t\t...outline,\n\t\tpts: trail,\n\t})\n\n\tdoodles.forEach((pts) =\u003e {\n\t\tdrawLines({\n\t\t\t...outline,\n\t\t\tpts: pts,\n\t\t})\n\t})\n\n})\n\n// It's a common practice to put all input handling and state updates before rendering.\nonUpdate(() =\u003e {\n\n\ttrail.push(mousePos())\n\n\tif (trail.length \u003e 16) {\n\t\ttrail.shift()\n\t}\n\n\tif (isMousePressed()) {\n\t\tdoodles.push([])\n\t}\n\n\tif (isMouseDown() \u0026\u0026 isMouseMoved()) {\n\t\tdoodles[doodles.length - 1].push(mousePos())\n\t}\n\n})\n","eatbomb":"kaboom()\n\nconst fruits = [\n\t\"apple\",\n\t\"pineapple\",\n\t\"grape\",\n\t\"watermelon\",\n]\n\nfor (const fruit of fruits) {\n\tloadSprite(fruit, `sprites/${fruit}.png`)\n}\n\nloadSprite(\"bean\", \"/sprites/bean.png\")\nloadSprite(\"bomb\", \"/sprites/bomb.png\")\nloadSound(\"hit\", \"/sounds/hit.mp3\")\nloadSound(\"wooosh\", \"/sounds/wooosh.mp3\")\n\nscene(\"start\", () =\u003e {\n\n\tplay(\"wooosh\")\n\n\tadd([\n\t\ttext(\"Eat All\"),\n\t\tpos(center().sub(0, 100)),\n\t\tscale(2),\n\t\torigin(\"center\"),\n\t])\n\n\tadd([\n\t\tsprite(\"bomb\"),\n\t\tpos(center().add(0, 100)),\n\t\tscale(2),\n\t\torigin(\"center\"),\n\t])\n\n\twait(1.5, () =\u003e go(\"game\"))\n\n})\n\n// main game scene content\nscene(\"game\", () =\u003e {\n\n\tconst SPEED_MIN = 120\n\tconst SPEED_MAX = 640\n\n\t// add the player game object\n\tconst player = add([\n\t\tsprite(\"bean\"),\n\t\tpos(40, 20),\n\t\tarea({ scale: 0.5 }),\n\t\torigin(\"center\"),\n\t])\n\n\t// make the layer move by mouse\n\tplayer.onUpdate(() =\u003e {\n\t\tplayer.pos = mousePos()\n\t})\n\n\t// game over if player eats a fruit\n\tplayer.onCollide(\"fruit\", (fruit) =\u003e {\n\t\tgo(\"lose\", score)\n\t\tplay(\"hit\")\n\t})\n\n\t// move the food every frame, destroy it if far outside of screen\n\tonUpdate(\"food\", (food) =\u003e {\n\t\tfood.move(-food.speed, 0)\n\t\tif (food.pos.x \u003c -120) {\n\t\t\tdestroy(food)\n\t\t}\n\t})\n\n\tonUpdate(\"bomb\", (bomb) =\u003e {\n\t\tif (bomb.pos.x \u003c= 0) {\n\t\t\tgo(\"lose\", score)\n\t\t\tplay(\"hit\")\n\t\t\taddKaboom(bomb.pos)\n\t\t}\n\t})\n\n\t// score counter\n\tlet score = 0\n\n\tconst scoreLabel = add([\n\t\ttext(score, 32),\n\t\tpos(12, 12),\n\t])\n\n\t// increment score if player eats a bomb\n\tplayer.onCollide(\"bomb\", (bomb) =\u003e {\n\t\taddKaboom(player.pos)\n\t\tscore += 1\n\t\tdestroy(bomb)\n\t\tscoreLabel.text = score\n\t\tburp()\n\t\tshake(12)\n\t})\n\n\t// do this every 0.3 seconds\n\tloop(0.3, () =\u003e {\n\n\t\t// spawn from right side of the screen\n\t\tconst x = width() + 24\n\t\t// spawn from a random y position\n\t\tconst y = rand(0, height())\n\t\t// get a random speed\n\t\tconst speed = rand(SPEED_MIN, SPEED_MAX)\n\t\t// 50% percent chance is bomb\n\t\tconst isBomb = chance(0.5)\n\t\tconst spriteName = isBomb ? \"bomb\" : choose(fruits)\n\n\t\tadd([\n\t\t\tsprite(spriteName),\n\t\t\tpos(x, y),\n\t\t\tarea({ scale: 0.5 }),\n\t\t\torigin(\"center\"),\n\t\t\t\"food\",\n\t\t\tisBomb ? \"bomb\" : \"fruit\",\n\t\t\t{ speed: speed }\n\t\t])\n\n\t})\n\n})\n\n// game over scene\nscene(\"lose\", (score) =\u003e {\n\n\tadd([\n\t\tsprite(\"bean\"),\n\t\tpos(width() / 2, height() / 2 - 108),\n\t\tscale(3),\n\t\torigin(\"center\"),\n\t])\n\n\t// display score\n\tadd([\n\t\ttext(score),\n\t\tpos(width() / 2, height() / 2 + 108),\n\t\tscale(3),\n\t\torigin(\"center\"),\n\t])\n\n\t// go back to game with space is pressed\n\tonKeyPress(\"space\", () =\u003e go(\"start\"))\n\tonClick(() =\u003e go(\"start\"))\n\n})\n\n// start with the \"game\" scene\ngo(\"start\")\n","egg":"// Egg minigames (yes, like Peppa)\n\nkaboom()\n\nloadSprite(\"bean\", \"/sprites/bean.png\")\nloadSprite(\"egg\", \"/sprites/egg.png\")\nloadSprite(\"egg_crack\", \"/sprites/egg_crack.png\")\n\nconst player = add([\n\tsprite(\"bean\"),\n\tpos(center()),\n\tscale(2),\n\torigin(\"center\"),\n\tz(50),\n])\n\nconst counter = add([\n\ttext(\"0\"),\n\tpos(24, 24),\n\tz(100),\n\t{ value: 0 },\n])\n\n// \"shake\" is taken, so..\nfunction rock() {\n\tlet strength = 0\n\tlet time = 0\n\treturn {\n\t\tid: \"rock\",\n\t\trequire: [ \"rotate\" ],\n\t\tupdate() {\n\t\t\tif (strength === 0) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\tthis.angle = Math.sin(time * 10) * strength\n\t\t\ttime += dt()\n\t\t\tstrength -= dt() * 30\n\t\t\tif (strength \u003c= 0) {\n\t\t\t\tstrength = 0\n\t\t\t\ttime = 0\n\t\t\t}\n\t\t},\n\t\trock(n = 15) {\n\t\t\tstrength = n\n\t\t},\n\t}\n}\n\nonKeyPress(\"space\", () =\u003e {\n\n\tplayer.moveTo(rand(0, width()), rand(0, height()))\n\n\tadd([\n\t\tsprite(\"egg\"),\n\t\tpos(player.pos.add(0, 24)),\n\t\trotate(0),\n\t\torigin(\"bot\"),\n\t\trock(),\n\t\t\"egg\",\n\t\t{ stage: 0 },\n\t])\n\n})\n\n// HATCH\nonKeyPress(\"enter\", () =\u003e {\n\tevery(\"egg\", (e) =\u003e {\n\t\tif (e.stage === 0) {\n\t\t\te.stage = 1\n\t\t\te.rock()\n\t\t\te.use(sprite(\"egg_crack\"))\n\t\t} else if (e.stage === 1) {\n\t\t\te.stage = 2\n\t\t\te.use(sprite(\"bean\"))\n\t\t\taddKaboom(e.pos.sub(0, e.height / 2))\n\t\t\tcounter.value += 1\n\t\t\tcounter.text = counter.value\n\t\t}\n\t})\n})\n","flappy":"kaboom()\n\nloadSprite(\"bean\", \"/sprites/bean.png\")\nloadSound(\"score\", \"/sounds/score.mp3\")\nloadSound(\"wooosh\", \"/sounds/wooosh.mp3\")\nloadSound(\"hit\", \"/sounds/hit.mp3\")\n\nscene(\"game\", () =\u003e {\n\n\tconst PIPE_OPEN = 240\n\tconst PIPE_MIN = 60\n\tconst JUMP_FORCE = 800\n\tconst SPEED = 320\n\tconst CEILING = -60\n\n\t// define gravity\n\tgravity(3200)\n\n\t// a game object consists of a list of components and tags\n\tconst bean = add([\n\t\t// sprite() means it's drawn with a sprite of name \"bean\" (defined above in 'loadSprite')\n\t\tsprite(\"bean\"),\n\t\t// give it a position\n\t\tpos(width() / 4, 0),\n\t\t// give it a collider\n\t\tarea(),\n\t\t// body component enables it to fall and jump in a gravity world\n\t\tbody(),\n\t])\n\n\t// check for fall death\n\tbean.onUpdate(() =\u003e {\n\t\tif (bean.pos.y \u003e= height() || bean.pos.y \u003c= CEILING) {\n\t\t\t// switch to \"lose\" scene\n\t\t\tgo(\"lose\", score)\n\t\t}\n\t})\n\n\t// jump\n\tonKeyPress(\"space\", () =\u003e {\n\t\tbean.jump(JUMP_FORCE)\n\t\tplay(\"wooosh\")\n\t})\n\n\t// mobile\n\tonClick(() =\u003e {\n\t\tbean.jump(JUMP_FORCE)\n\t\tplay(\"wooosh\")\n\t})\n\n\tfunction spawnPipe() {\n\n\t\t// calculate pipe positions\n\t\tconst h1 = rand(PIPE_MIN, height() - PIPE_MIN - PIPE_OPEN)\n\t\tconst h2 = height() - h1 - PIPE_OPEN\n\n\t\tadd([\n\t\t\tpos(width(), 0),\n\t\t\trect(64, h1),\n\t\t\tcolor(0, 127, 255),\n\t\t\toutline(4),\n\t\t\tarea(),\n\t\t\tmove(LEFT, SPEED),\n\t\t\tcleanup(),\n\t\t\t// give it tags to easier define behaviors see below\n\t\t\t\"pipe\",\n\t\t])\n\n\t\tadd([\n\t\t\tpos(width(), h1 + PIPE_OPEN),\n\t\t\trect(64, h2),\n\t\t\tcolor(0, 127, 255),\n\t\t\toutline(4),\n\t\t\tarea(),\n\t\t\tmove(LEFT, SPEED),\n\t\t\tcleanup(),\n\t\t\t// give it tags to easier define behaviors see below\n\t\t\t\"pipe\",\n\t\t\t// raw obj just assigns every field to the game obj\n\t\t\t{ passed: false, },\n\t\t])\n\n\t}\n\n\t// callback when bean onCollide with objects with tag \"pipe\"\n\tbean.onCollide(\"pipe\", () =\u003e {\n\t\tgo(\"lose\", score)\n\t\tplay(\"hit\")\n\t\taddKaboom(bean.pos)\n\t})\n\n\t// per frame event for all objects with tag 'pipe'\n\tonUpdate(\"pipe\", (p) =\u003e {\n\t\t// check if bean passed the pipe\n\t\tif (p.pos.x + p.width \u003c= bean.pos.x \u0026\u0026 p.passed === false) {\n\t\t\taddScore()\n\t\t\tp.passed = true\n\t\t}\n\t})\n\n\t// spawn a pipe every 1 sec\n\tloop(1, () =\u003e {\n\t\tspawnPipe()\n\t})\n\n\tlet score = 0\n\n\t// display score\n\tconst scoreLabel = add([\n\t\ttext(score),\n\t\torigin(\"center\"),\n\t\tpos(width() / 2, 80),\n\t\tfixed(),\n\t])\n\n\tfunction addScore() {\n\t\tscore++\n\t\tscoreLabel.text = score\n\t\tplay(\"score\")\n\t}\n\n})\n\nscene(\"lose\", (score) =\u003e {\n\n\tadd([\n\t\tsprite(\"bean\"),\n\t\tpos(width() / 2, height() / 2 - 108),\n\t\tscale(3),\n\t\torigin(\"center\"),\n\t])\n\n\t// display score\n\tadd([\n\t\ttext(score),\n\t\tpos(width() / 2, height() / 2 + 108),\n\t\tscale(3),\n\t\torigin(\"center\"),\n\t])\n\n\t// go back to game with space is pressed\n\tonKeyPress(\"space\", () =\u003e go(\"game\"))\n\tonClick(() =\u003e go(\"game\"))\n\n})\n\ngo(\"game\")\n","gravity":"// Responding to gravity \u0026 jumping\n\n// Start kaboom\nkaboom()\n\n// Load assets\nloadSprite(\"bean\", \"/sprites/bean.png\")\n\n// Set the gravity acceleration (pixels per second)\ngravity(1600)\n\n// Add player game object\nconst player = add([\n\tsprite(\"bean\"),\n\tpos(center()),\n\tarea(),\n\t// body() component gives the ability to respond to gravity\n\tbody(),\n])\n\nonKeyPress(\"space\", () =\u003e {\n\t// .isGrounded() is provided by body()\n\tif (player.isGrounded()) {\n\t\t// .jump() is provided by body()\n\t\tplayer.jump()\n\t}\n})\n\n// .onGround() is provided by body(). It registers an event that runs whenever player hits the ground.\nplayer.onGround(() =\u003e {\n\tdebug.log(\"ouch\")\n})\n\n// Add a platform to hold the player\nadd([\n\trect(width(), 48),\n\toutline(4),\n\tarea(),\n\tpos(0, height() - 48),\n\t// Give objects a solid() component if you don't want other solid objects pass through\n\tsolid(),\n])\n\nadd([\n\ttext(\"Press space key\", { width: width() / 2 }),\n\tpos(12, 12),\n])\n\n// Check out https://kaboomjs.com#BodyComp for everything body() provides\n","kaboom":"kaboom()\nonKeyPress(() =\u003e addKaboom(mousePos()))\nonMouseMove(() =\u003e addKaboom(mousePos()))\n","layer":"kaboom()\n\nloadSprite(\"bean\", \"/sprites/bean.png\")\n\n// layer \"ui\" will be on top of layer \"game\", with \"game\" layer being the default\nlayers([\n\t\"game\",\n\t\"ui\",\n], \"game\")\n\nadd([\n\tsprite(\"bean\"),\n\tscale(5),\n\t// specify layer with layer() component\n\tlayer(\"ui\"),\n\tcolor(0, 0, 255),\n])\n\n// this obj doesn't have a layer() component, fallback on default \"game\" layer\nadd([\n\tsprite(\"bean\"),\n\tpos(100, 100),\n\tscale(5),\n])\n","level":"// Build levels with addLevel()\n\n// Start game\nkaboom()\n\n// Load assets\nloadSprite(\"bean\", \"/sprites/bean.png\")\nloadSprite(\"coin\", \"/sprites/coin.png\")\nloadSprite(\"spike\", \"/sprites/spike.png\")\nloadSprite(\"grass\", \"/sprites/grass.png\")\nloadSprite(\"ghosty\", \"/sprites/ghosty.png\")\nloadSound(\"score\", \"/sounds/score.mp3\")\n\nconst SPEED = 480\n\ngravity(2400)\n\nconst level = addLevel([\n\t// Design the level layout with symbols\n\t\"@  ^ $$\",\n\t\"=======\",\n], {\n\t// The size of each grid\n\twidth: 64,\n\theight: 64,\n\t// The position of the top left block\n\tpos: vec2(100, 200),\n\t// Define what each symbol means (in components)\n\t\"@\": () =\u003e [\n\t\tsprite(\"bean\"),\n\t\tarea(),\n\t\tbody(),\n\t\torigin(\"bot\"),\n\t\t\"player\",\n\t],\n\t\"=\": () =\u003e [\n\t\tsprite(\"grass\"),\n\t\tarea(),\n\t\tsolid(),\n\t\torigin(\"bot\"),\n\t],\n\t\"$\": () =\u003e [\n\t\tsprite(\"coin\"),\n\t\tarea(),\n\t\torigin(\"bot\"),\n\t\t\"coin\",\n\t],\n\t\"^\": () =\u003e [\n\t\tsprite(\"spike\"),\n\t\tarea(),\n\t\torigin(\"bot\"),\n\t\t\"danger\",\n\t],\n})\n\n// Get the player object from tag\nconst player = get(\"player\")[0]\n\n// Movements\nonKeyPress(\"space\", () =\u003e {\n\tif (player.isGrounded()) {\n\t\tplayer.jump()\n\t}\n})\n\nonKeyDown(\"left\", () =\u003e {\n\tplayer.move(-SPEED, 0)\n})\n\nonKeyDown(\"right\", () =\u003e {\n\tplayer.move(SPEED, 0)\n})\n\n// Back to the original position if hit a \"danger\" item\nplayer.onCollide(\"danger\", () =\u003e {\n\tplayer.pos = level.getPos(0, 0)\n})\n\n// Eat the coin!\nplayer.onCollide(\"coin\", (coin) =\u003e {\n\tdestroy(coin)\n\tplay(\"score\")\n})\n","movement":"// Input handling and basic player movement\n\n// Start kaboom\nkaboom()\n\n// Load assets\nloadSprite(\"bean\", \"/sprites/bean.png\")\n\n// Define player movement speed (pixels per second)\nconst SPEED = 320\n\n// Add player game object\nconst player = add([\n\tsprite(\"bean\"),\n\t// center() returns the center point vec2(width() / 2, height() / 2)\n\tpos(center()),\n])\n\n// onKeyDown() registers an event that runs every frame as long as user is holding a certain key\nonKeyDown(\"left\", () =\u003e {\n\t// .move() is provided by pos() component, move by pixels per second\n\tplayer.move(-SPEED, 0)\n})\n\nonKeyDown(\"right\", () =\u003e {\n\tplayer.move(SPEED, 0)\n})\n\nonKeyDown(\"up\", () =\u003e {\n\tplayer.move(0, -SPEED)\n})\n\nonKeyDown(\"down\", () =\u003e {\n\tplayer.move(0, SPEED)\n})\n\n// onClick() registers an event that runs once when left mouse is clicked\nonClick(() =\u003e {\n\t// .moveTo() is provided by pos() component, changes the position\n\tplayer.moveTo(mousePos())\n})\n\nadd([\n\t// text() component is similar to sprite() but renders text\n\ttext(\"Press arrow keys\", { width: width() / 2 }),\n\tpos(12, 12),\n])\n","multiboom":"// multiple kaboom contexts in one page\n\nconst backgrounds = [\n\t[255, 0, 255],\n\t[0, 0, 255],\n]\n\nfor (let i = 0; i \u003c 2; i++) {\n\n\tconst k = kaboom({\n\t\tbackground: backgrounds[i],\n\t\tglobal: false,\n\t\twidth: 320,\n\t\theight: 320,\n\t})\n\n\tk.loadBean()\n\n\t// custom spin component\n\tfunction spin() {\n\t\treturn {\n\t\t\tid: \"spin\",\n\t\t\tupdate() {\n\t\t\t\tthis.scale = Math.sin(k.time() + i) * 9\n\t\t\t\tthis.angle = k.time() * 60\n\t\t\t},\n\t\t}\n\t}\n\n\tk.add([\n\t\tk.sprite(\"bean\"),\n\t\tk.pos(k.width() / 2, k.height() / 2),\n\t\tk.scale(6),\n\t\tk.rotate(0),\n\t\tspin(),\n\t\tk.origin(\"center\"),\n\t])\n\n\tk.add([\n\t\tk.text(`#${i}`),\n\t])\n\n}\n","out":"// detect if obj is out of screen\n\nkaboom()\n\nloadSprite(\"bean\", \"/sprites/bean.png\")\n\n// custom comp\nfunction handleout() {\n\treturn {\n\t\tid: \"handleout\",\n\t\trequire: [ \"pos\" ],\n\t\tupdate() {\n\t\t\tconst spos = this.screenPos()\n\t\t\tif (\n\t\t\t\tspos.x \u003c 0 ||\n\t\t\t\tspos.x \u003e width() ||\n\t\t\t\tspos.y \u003c 0 ||\n\t\t\t\tspos.y \u003e height()\n\t\t\t) {\n\t\t\t\t// triggers a custom event when out\n\t\t\t\tthis.trigger(\"out\")\n\t\t\t}\n\t\t},\n\t}\n}\n\nconst SPEED = 640\n\nfunction shoot() {\n\tconst center = vec2(width() / 2, height() / 2)\n\tconst mpos = mousePos()\n\tadd([\n\t\tpos(center),\n\t\tsprite(\"bean\"),\n\t\torigin(\"center\"),\n\t\thandleout(),\n\t\t\"bean\",\n\t\t{ dir: mpos.sub(center).unit(), },\n\t])\n}\n\nonKeyPress(\"space\", shoot)\nonClick(shoot)\n\nonUpdate(\"bean\", (m) =\u003e {\n\tm.move(m.dir.scale(SPEED))\n})\n\n// binds a custom event \"out\" to tag group \"bean\"\non(\"out\", \"bean\", (m) =\u003e {\n\taddKaboom(m.pos)\n\tdestroy(m)\n})\n","particle":"// Particle spawning\n\nkaboom()\n\nconst sprites = [\n\t\"apple\",\n\t\"heart\",\n\t\"coin\",\n\t\"meat\",\n\t\"lightening\",\n]\n\nsprites.forEach((spr) =\u003e {\n\tloadSprite(spr, `/sprites/${spr}.png`)\n})\n\n// Spawn one particle every 0.1 second\nloop(0.1, () =\u003e {\n\n\t// Compose particle properties with components\n\tconst item = add([\n\t\tpos(mousePos()),\n\t\tsprite(choose(sprites)),\n\t\torigin(\"center\"),\n\t\tscale(rand(0.5, 1)),\n\t\tarea(),\n\t\tbody({ solid: false, }),\n\t\tlifespan(1, { fade: 0.5 }),\n\t\tmove(choose([LEFT, RIGHT]), rand(60, 240)),\n\t])\n\n\titem.jump(rand(320, 640))\n\n})\n","platformer":"kaboom()\n\n// load assets\nloadSprite(\"bean\", \"/sprites/bean.png\")\nloadSprite(\"ghosty\", \"/sprites/ghosty.png\")\nloadSprite(\"spike\", \"/sprites/spike.png\")\nloadSprite(\"grass\", \"/sprites/grass.png\")\nloadSprite(\"prize\", \"/sprites/jumpy.png\")\nloadSprite(\"apple\", \"/sprites/apple.png\")\nloadSprite(\"portal\", \"/sprites/portal.png\")\nloadSprite(\"coin\", \"/sprites/coin.png\")\nloadSound(\"coin\", \"/sounds/score.mp3\")\nloadSound(\"powerup\", \"/sounds/powerup.mp3\")\nloadSound(\"blip\", \"/sounds/blip.mp3\")\nloadSound(\"hit\", \"/sounds/hit.mp3\")\nloadSound(\"portal\", \"/sounds/portal.mp3\")\n\n// custom component controlling enemy patrol movement\nfunction patrol(speed = 60, dir = 1) {\n\treturn {\n\t\tid: \"patrol\",\n\t\trequire: [ \"pos\", \"area\", ],\n\t\tadd() {\n\t\t\tthis.on(\"collide\", (obj, col) =\u003e {\n\t\t\t\tif (col.isLeft() || col.isRight()) {\n\t\t\t\t\tdir = -dir\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tupdate() {\n\t\t\tthis.move(speed * dir, 0)\n\t\t},\n\t}\n}\n\n// custom component that makes stuff grow big\nfunction big() {\n\tlet timer = 0\n\tlet isBig = false\n\tlet destScale = 1\n\treturn {\n\t\t// component id / name\n\t\tid: \"big\",\n\t\t// it requires the scale component\n\t\trequire: [ \"scale\" ],\n\t\t// this runs every frame\n\t\tupdate() {\n\t\t\tif (isBig) {\n\t\t\t\ttimer -= dt()\n\t\t\t\tif (timer \u003c= 0) {\n\t\t\t\t\tthis.smallify()\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.scale = this.scale.lerp(vec2(destScale), dt() * 6)\n\t\t},\n\t\t// custom methods\n\t\tisBig() {\n\t\t\treturn isBig\n\t\t},\n\t\tsmallify() {\n\t\t\tdestScale = 1\n\t\t\ttimer = 0\n\t\t\tisBig = false\n\t\t},\n\t\tbiggify(time) {\n\t\t\tdestScale = 2\n\t\t\ttimer = time\n\t\t\tisBig = true\n\t\t},\n\t}\n}\n\n// define some constants\nconst JUMP_FORCE = 1320\nconst MOVE_SPEED = 480\nconst FALL_DEATH = 2400\n\nconst LEVELS = [\n\t[\n\t\t\"                          $\",\n\t\t\"                          $\",\n\t\t\"                          $\",\n\t\t\"                          $\",\n\t\t\"                          $\",\n\t\t\"           $$         =   $\",\n\t\t\"  %      ====         =   $\",\n\t\t\"                      =   $\",\n\t\t\"                      =    \",\n\t\t\"       ^^      = \u003e    =   @\",\n\t\t\"===========================\",\n\t],\n\t[\n\t\t\"     $    $    $    $     $\",\n\t\t\"     $    $    $    $     $\",\n\t\t\"                           \",\n\t\t\"                           \",\n\t\t\"                           \",\n\t\t\"                           \",\n\t\t\"                           \",\n\t\t\" ^^^^\u003e^^^^\u003e^^^^\u003e^^^^\u003e^^^^^@\",\n\t\t\"===========================\",\n\t],\n]\n\n// define what each symbol means in the level graph\nconst levelConf = {\n\t// grid size\n\twidth: 64,\n\theight: 64,\n\t// define each object as a list of components\n\t\"=\": () =\u003e [\n\t\tsprite(\"grass\"),\n\t\tarea(),\n\t\tsolid(),\n\t\torigin(\"bot\"),\n\t],\n\t\"$\": () =\u003e [\n\t\tsprite(\"coin\"),\n\t\tarea(),\n\t\tpos(0, -9),\n\t\torigin(\"bot\"),\n\t\t\"coin\",\n\t],\n\t\"%\": () =\u003e [\n\t\tsprite(\"prize\"),\n\t\tarea(),\n\t\tsolid(),\n\t\torigin(\"bot\"),\n\t\t\"prize\",\n\t],\n\t\"^\": () =\u003e [\n\t\tsprite(\"spike\"),\n\t\tarea(),\n\t\tsolid(),\n\t\torigin(\"bot\"),\n\t\t\"danger\",\n\t],\n\t\"#\": () =\u003e [\n\t\tsprite(\"apple\"),\n\t\tarea(),\n\t\torigin(\"bot\"),\n\t\tbody(),\n\t\t\"apple\",\n\t],\n\t\"\u003e\": () =\u003e [\n\t\tsprite(\"ghosty\"),\n\t\tarea(),\n\t\torigin(\"bot\"),\n\t\tbody(),\n\t\tpatrol(),\n\t\t\"enemy\",\n\t],\n\t\"@\": () =\u003e [\n\t\tsprite(\"portal\"),\n\t\tarea({ scale: 0.5, }),\n\t\torigin(\"bot\"),\n\t\tpos(0, -12),\n\t\t\"portal\",\n\t],\n}\n\nscene(\"game\", ({ levelId, coins } = { levelId: 0, coins: 0 }) =\u003e {\n\n\tgravity(3200)\n\n\t// add level to scene\n\tconst level = addLevel(LEVELS[levelId ?? 0], levelConf)\n\n\t// define player object\n\tconst player = add([\n\t\tsprite(\"bean\"),\n\t\tpos(0, 0),\n\t\tarea(),\n\t\tscale(1),\n\t\t// makes it fall to gravity and jumpable\n\t\tbody(),\n\t\t// the custom component we defined above\n\t\tbig(),\n\t\torigin(\"bot\"),\n\t])\n\n\t// action() runs every frame\n\tplayer.onUpdate(() =\u003e {\n\t\t// center camera to player\n\t\tcamPos(player.pos)\n\t\t// check fall death\n\t\tif (player.pos.y \u003e= FALL_DEATH) {\n\t\t\tgo(\"lose\")\n\t\t}\n\t})\n\n\t// if player onCollide with any obj with \"danger\" tag, lose\n\tplayer.onCollide(\"danger\", () =\u003e {\n\t\tgo(\"lose\")\n\t\tplay(\"hit\")\n\t})\n\n\tplayer.onCollide(\"portal\", () =\u003e {\n\t\tplay(\"portal\")\n\t\tif (levelId + 1 \u003c LEVELS.length) {\n\t\t\tgo(\"game\", {\n\t\t\t\tlevelId: levelId + 1,\n\t\t\t\tcoins: coins,\n\t\t\t})\n\t\t} else {\n\t\t\tgo(\"win\")\n\t\t}\n\t})\n\n\tplayer.onGround((l) =\u003e {\n\t\tif (l.is(\"enemy\")) {\n\t\t\tplayer.jump(JUMP_FORCE * 1.5)\n\t\t\tdestroy(l)\n\t\t\taddKaboom(player.pos)\n\t\t\tplay(\"powerup\")\n\t\t}\n\t})\n\n\tplayer.onCollide(\"enemy\", (e, col) =\u003e {\n\t\t// if it's not from the top, die\n\t\tif (!col.isBottom()) {\n\t\t\tgo(\"lose\")\n\t\t\tplay(\"hit\")\n\t\t}\n\t})\n\n\tlet hasApple = false\n\n\t// grow an apple if player's head bumps into an obj with \"prize\" tag\n\tplayer.onHeadbutt((obj) =\u003e {\n\t\tif (obj.is(\"prize\") \u0026\u0026 !hasApple) {\n\t\t\tconst apple = level.spawn(\"#\", obj.gridPos.sub(0, 1))\n\t\t\tapple.jump()\n\t\t\thasApple = true\n\t\t\tplay(\"blip\")\n\t\t}\n\t})\n\n\t// player grows big onCollide with an \"apple\" obj\n\tplayer.onCollide(\"apple\", (a) =\u003e {\n\t\tdestroy(a)\n\t\t// as we defined in the big() component\n\t\tplayer.biggify(3)\n\t\thasApple = false\n\t\tplay(\"powerup\")\n\t})\n\n\tlet coinPitch = 0\n\n\tonUpdate(() =\u003e {\n\t\tif (coinPitch \u003e 0) {\n\t\t\tcoinPitch = Math.max(0, coinPitch - dt() * 100)\n\t\t}\n\t})\n\n\tplayer.onCollide(\"coin\", (c) =\u003e {\n\t\tdestroy(c)\n\t\tplay(\"coin\", {\n\t\t\tdetune: coinPitch,\n\t\t})\n\t\tcoinPitch += 100\n\t\tcoins += 1\n\t\tcoinsLabel.text = coins\n\t})\n\n\tconst coinsLabel = add([\n\t\ttext(coins),\n\t\tpos(24, 24),\n\t\tfixed(),\n\t])\n\n\t// jump with space\n\tonKeyPress(\"space\", () =\u003e {\n\t\t// these 2 functions are provided by body() component\n\t\tif (player.isGrounded()) {\n\t\t\tplayer.jump(JUMP_FORCE)\n\t\t}\n\t})\n\n\tonKeyDown(\"left\", () =\u003e {\n\t\tplayer.move(-MOVE_SPEED, 0)\n\t})\n\n\tonKeyDown(\"right\", () =\u003e {\n\t\tplayer.move(MOVE_SPEED, 0)\n\t})\n\n\tonKeyPress(\"down\", () =\u003e {\n\t\tplayer.weight = 3\n\t})\n\n\tonKeyRelease(\"down\", () =\u003e {\n\t\tplayer.weight = 1\n\t})\n\n\tonKeyPress(\"f\", () =\u003e {\n\t\tfullscreen(!fullscreen())\n\t})\n\n})\n\nscene(\"lose\", () =\u003e {\n\tadd([\n\t\ttext(\"You Lose\"),\n\t])\n\tonKeyPress(() =\u003e go(\"game\"))\n})\n\nscene(\"win\", () =\u003e {\n\tadd([\n\t\ttext(\"You Win\"),\n\t])\n\tonKeyPress(() =\u003e go(\"game\"))\n})\n\ngo(\"game\")\n","pong":"kaboom({\n\tbackground: [ 255, 255, 128 ],\n})\n\n// add paddles\nadd([\n\tpos(40, 0),\n\trect(20, 80),\n\toutline(4),\n\torigin(\"center\"),\n\tarea(),\n\t\"paddle\",\n])\n\nadd([\n\tpos(width() - 40, 0),\n\trect(20, 80),\n\toutline(4),\n\torigin(\"center\"),\n\tarea(),\n\t\"paddle\",\n])\n\n// move paddles with mouse\nonUpdate(\"paddle\", (p) =\u003e {\n\tp.pos.y = mousePos().y\n})\n\n// score counter\nlet score = 0\n\nadd([\n\ttext(score),\n\tpos(center()),\n\torigin(\"center\"),\n\tz(50),\n\t{ update() { this.text = score }}\n])\n\n// ball\nlet speed = 480\n\nconst ball = add([\n\tpos(center()),\n\tcircle(16),\n\toutline(4),\n\tarea({ width: 32, height: 32, offset: vec2(-16) }),\n\t{ vel: dir(rand(-20, 20)) },\n])\n\n// move ball, bounce it when touche horizontal edges, respawn when touch vertical edges\nball.onUpdate(() =\u003e {\n\tball.move(ball.vel.scale(speed))\n\tif (ball.pos.x \u003c 0 || ball.pos.x \u003e width()) {\n\t\tscore = 0\n\t\tball.pos = center()\n\t\tball.vel = dir(rand(-20, 20))\n\t\tspeed = 320\n\t}\n\tif (ball.pos.y \u003c 0 || ball.pos.y \u003e height()) {\n\t\tball.vel.y = -ball.vel.y\n\t}\n})\n\n// bounce when touch paddle\nball.onCollide(\"paddle\", (p) =\u003e {\n\tspeed += 60\n\tball.vel = dir(ball.pos.angle(p.pos))\n\tscore++\n})\n","rpg":"// simple rpg style walk and talk\n\nkaboom()\n\nloadSprite(\"bag\", \"/sprites/bag.png\")\nloadSprite(\"ghosty\", \"/sprites/ghosty.png\")\nloadSprite(\"grass\", \"/sprites/grass.png\")\nloadSprite(\"steel\", \"/sprites/steel.png\")\nloadSprite(\"door\", \"/sprites/door.png\")\nloadSprite(\"key\", \"/sprites/key.png\")\nloadSprite(\"bean\", \"/sprites/bean.png\")\n\nscene(\"main\", (levelIdx) =\u003e {\n\n\tconst SPEED = 320\n\n\t// character dialog data\n\tconst characters = {\n\t\t\"a\": {\n\t\t\tsprite: \"bag\",\n\t\t\tmsg: \"ohhi how are you?\",\n\t\t},\n\t\t\"b\": {\n\t\t\tsprite: \"ghosty\",\n\t\t\tmsg: \"get out!\",\n\t\t},\n\t}\n\n\t// level layouts\n\tconst levels = [\n\t\t[\n\t\t\t\"=====|===\",\n\t\t\t\"=       =\",\n\t\t\t\"= a     =\",\n\t\t\t\"=       =\",\n\t\t\t\"=       =\",\n\t\t\t\"=    $  =\",\n\t\t\t\"=       =\",\n\t\t\t\"=   @   =\",\n\t\t\t\"=========\",\n\t\t],\n\t\t[\n\t\t\t\"---------\",\n\t\t\t\"-       -\",\n\t\t\t\"-       -\",\n\t\t\t\"-  $    -\",\n\t\t\t\"|       -\",\n\t\t\t\"-       -\",\n\t\t\t\"-     b -\",\n\t\t\t\"-   @   -\",\n\t\t\t\"---------\",\n\t\t],\n\t]\n\n\taddLevel(levels[levelIdx], {\n\t\twidth: 64,\n\t\theight: 64,\n\t\tpos: vec2(64, 64),\n\t\t\"=\": () =\u003e [\n\t\t\tsprite(\"grass\"),\n\t\t\tarea(),\n\t\t\tsolid(),\n\t\t],\n\t\t\"-\": () =\u003e [\n\t\t\tsprite(\"steel\"),\n\t\t\tarea(),\n\t\t\tsolid(),\n\t\t],\n\t\t\"$\": () =\u003e [\n\t\t\tsprite(\"key\"),\n\t\t\tarea(),\n\t\t\t\"key\",\n\t\t],\n\t\t\"@\": () =\u003e [\n\t\t\tsprite(\"bean\"),\n\t\t\tarea(),\n\t\t\tsolid(),\n\t\t\t\"player\",\n\t\t],\n\t\t\"|\": () =\u003e [\n\t\t\tsprite(\"door\"),\n\t\t\tarea(),\n\t\t\tsolid(),\n\t\t\t\"door\",\n\t\t],\n\t\t// any() is a special function that gets called everytime there's a\n\t\t// symbole not defined above and is supposed to return what that symbol\n\t\t// means\n\t\tany(ch) {\n\t\t\tconst char = characters[ch]\n\t\t\tif (char) {\n\t\t\t\treturn [\n\t\t\t\t\tsprite(char.sprite),\n\t\t\t\t\tarea(),\n\t\t\t\t\tsolid(),\n\t\t\t\t\t\"character\",\n\t\t\t\t\t{ msg: char.msg, },\n\t\t\t\t]\n\t\t\t}\n\t\t},\n\t})\n\n\t// get the player game obj by tag\n\tconst player = get(\"player\")[0]\n\n\tfunction addDialog() {\n\t\tconst h = 160\n\t\tconst pad = 16\n\t\tconst bg = add([\n\t\t\tpos(0, height() - h),\n\t\t\trect(width(), h),\n\t\t\tcolor(0, 0, 0),\n\t\t\tz(100),\n\t\t])\n\t\tconst txt = add([\n\t\t\ttext(\"\", {\n\t\t\t\twidth: width(),\n\t\t\t}),\n\t\t\tpos(0 + pad, height() - h + pad),\n\t\t\tz(100),\n\t\t])\n\t\tbg.hidden = true\n\t\ttxt.hidden = true\n\t\treturn {\n\t\t\tsay(t) {\n\t\t\t\ttxt.text = t\n\t\t\t\tbg.hidden = false\n\t\t\t\ttxt.hidden = false\n\t\t\t},\n\t\t\tdismiss() {\n\t\t\t\tif (!this.active()) {\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\ttxt.text = \"\"\n\t\t\t\tbg.hidden = true\n\t\t\t\ttxt.hidden = true\n\t\t\t},\n\t\t\tactive() {\n\t\t\t\treturn !bg.hidden\n\t\t\t},\n\t\t\tdestroy() {\n\t\t\t\tbg.destroy()\n\t\t\t\ttxt.destroy()\n\t\t\t},\n\t\t}\n\t}\n\n\tlet hasKey = false\n\tconst dialog = addDialog()\n\n\tplayer.onCollide(\"key\", (key) =\u003e {\n\t\tdestroy(key)\n\t\thasKey = true\n\t})\n\n\tplayer.onCollide(\"door\", () =\u003e {\n\t\tif (hasKey) {\n\t\t\tif (levelIdx + 1 \u003c levels.length) {\n\t\t\t\tgo(\"main\", levelIdx + 1)\n\t\t\t} else {\n\t\t\t\tgo(\"win\")\n\t\t\t}\n\t\t} else {\n\t\t\tdialog.say(\"you got no key!\")\n\t\t}\n\t})\n\n\t// talk on touch\n\tplayer.onCollide(\"character\", (ch) =\u003e {\n\t\tdialog.say(ch.msg)\n\t})\n\n\tconst dirs = {\n\t\t\"left\": LEFT,\n\t\t\"right\": RIGHT,\n\t\t\"up\": UP,\n\t\t\"down\": DOWN,\n\t}\n\n\tfor (const dir in dirs) {\n\t\tonKeyPress(dir, () =\u003e {\n\t\t\tdialog.dismiss()\n\t\t})\n\t\tonKeyDown(dir, () =\u003e {\n\t\t\tplayer.move(dirs[dir].scale(SPEED))\n\t\t})\n\t}\n\n})\n\nscene(\"win\", () =\u003e {\n\tadd([\n\t\ttext(\"You Win!\"),\n\t\tpos(width() / 2, height() / 2),\n\t\torigin(\"center\"),\n\t])\n})\n\ngo(\"main\", 0)\n","runner":"const FLOOR_HEIGHT = 48\nconst JUMP_FORCE = 800\nconst SPEED = 480\n\n// initialize context\nkaboom()\n\n// load assets\nloadSprite(\"bean\", \"/sprites/bean.png\")\n\nscene(\"game\", () =\u003e {\n\n\t// define gravity\n\tgravity(2400)\n\n\t// add a game object to screen\n\tconst player = add([\n\t\t// list of components\n\t\tsprite(\"bean\"),\n\t\tpos(80, 40),\n\t\tarea(),\n\t\tbody(),\n\t])\n\n\t// floor\n\tadd([\n\t\trect(width(), FLOOR_HEIGHT),\n\t\toutline(4),\n\t\tpos(0, height()),\n\t\torigin(\"botleft\"),\n\t\tarea(),\n\t\tsolid(),\n\t\tcolor(127, 200, 255),\n\t])\n\n\tfunction jump() {\n\t\tif (player.isGrounded()) {\n\t\t\tplayer.jump(JUMP_FORCE)\n\t\t}\n\t}\n\n\t// jump when user press space\n\tonKeyPress(\"space\", jump)\n\tonClick(jump)\n\n\tfunction spawnTree() {\n\n\t\t// add tree obj\n\t\tadd([\n\t\t\trect(48, rand(32, 96)),\n\t\t\tarea(),\n\t\t\toutline(4),\n\t\t\tpos(width(), height() - FLOOR_HEIGHT),\n\t\t\torigin(\"botleft\"),\n\t\t\tcolor(255, 180, 255),\n\t\t\tmove(LEFT, SPEED),\n\t\t\tcleanup(),\n\t\t\t\"tree\",\n\t\t])\n\n\t\t// wait a random amount of time to spawn next tree\n\t\twait(rand(0.5, 1.5), spawnTree)\n\n\t}\n\n\t// start spawning trees\n\tspawnTree()\n\n\t// lose if player collides with any game obj with tag \"tree\"\n\tplayer.onCollide(\"tree\", () =\u003e {\n\t\t// go to \"lose\" scene and pass the score\n\t\tgo(\"lose\", score)\n\t\tburp()\n\t\taddKaboom(player.pos)\n\t})\n\n\t// keep track of score\n\tlet score = 0\n\n\tconst scoreLabel = add([\n\t\ttext(score),\n\t\tpos(24, 24),\n\t])\n\n\t// increment score every frame\n\tonUpdate(() =\u003e {\n\t\tscore++\n\t\tscoreLabel.text = score\n\t})\n\n})\n\nscene(\"lose\", (score) =\u003e {\n\n\tadd([\n\t\tsprite(\"bean\"),\n\t\tpos(width() / 2, height() / 2 - 80),\n\t\tscale(2),\n\t\torigin(\"center\"),\n\t])\n\n\t// display score\n\tadd([\n\t\ttext(score),\n\t\tpos(width() / 2, height() / 2 + 80),\n\t\tscale(2),\n\t\torigin(\"center\"),\n\t])\n\n\t// go back to game with space is pressed\n\tonKeyPress(\"space\", () =\u003e go(\"game\"))\n\tonClick(() =\u003e go(\"game\"))\n\n})\n\ngo(\"game\")\n","scenes":"// Extend our game with multiple scenes\n\n// Start game\nkaboom()\n\n// Load assets\nloadSprite(\"bean\", \"/sprites/bean.png\")\nloadSprite(\"coin\", \"/sprites/coin.png\")\nloadSprite(\"spike\", \"/sprites/spike.png\")\nloadSprite(\"grass\", \"/sprites/grass.png\")\nloadSprite(\"ghosty\", \"/sprites/ghosty.png\")\nloadSprite(\"portal\", \"/sprites/portal.png\")\nloadSound(\"score\", \"/sounds/score.mp3\")\nloadSound(\"portal\", \"/sounds/portal.mp3\")\n\nconst SPEED = 480\n\n// Design 2 levels\nconst LEVELS = [\n\t[\n\t\t\"@  ^ $$ \u003e\",\n\t\t\"=========\",\n\t],\n\t[\n\t\t\"@   $   \u003e\",\n\t\t\"=   =   =\",\n\t],\n]\n\n// Define a scene called \"game\". The callback will be run when we go() to the scene\n// Scenes can accept argument from go()\nscene(\"game\", ({ levelIdx, score }) =\u003e {\n\n\tgravity(2400)\n\n\t// Use the level passed, or first level\n\tconst level = addLevel(LEVELS[levelIdx || 0], {\n\t\twidth: 64,\n\t\theight: 64,\n\t\tpos: vec2(100, 200),\n\t\t\"@\": () =\u003e [\n\t\t\tsprite(\"bean\"),\n\t\t\tarea(),\n\t\t\tbody(),\n\t\t\torigin(\"bot\"),\n\t\t\t\"player\",\n\t\t],\n\t\t\"=\": () =\u003e [\n\t\t\tsprite(\"grass\"),\n\t\t\tarea(),\n\t\t\tsolid(),\n\t\t\torigin(\"bot\"),\n\t\t],\n\t\t\"$\": () =\u003e [\n\t\t\tsprite(\"coin\"),\n\t\t\tarea(),\n\t\t\torigin(\"bot\"),\n\t\t\t\"coin\",\n\t\t],\n\t\t\"^\": () =\u003e [\n\t\t\tsprite(\"spike\"),\n\t\t\tarea(),\n\t\t\torigin(\"bot\"),\n\t\t\t\"danger\",\n\t\t],\n\t\t\"\u003e\": () =\u003e [\n\t\t\tsprite(\"portal\"),\n\t\t\tarea(),\n\t\t\torigin(\"bot\"),\n\t\t\t\"portal\",\n\t\t],\n\t})\n\n\t// Get the player object from tag\n\tconst player = get(\"player\")[0]\n\n\t// Movements\n\tonKeyPress(\"space\", () =\u003e {\n\t\tif (player.isGrounded()) {\n\t\t\tplayer.jump()\n\t\t}\n\t})\n\n\tonKeyDown(\"left\", () =\u003e {\n\t\tplayer.move(-SPEED, 0)\n\t})\n\n\tonKeyDown(\"right\", () =\u003e {\n\t\tplayer.move(SPEED, 0)\n\t})\n\n\tplayer.onCollide(\"danger\", () =\u003e {\n\t\tplayer.pos = level.getPos(0, 0)\n\t\t// Go to \"lose\" scene when we hit a \"danger\"\n\t\tgo(\"lose\")\n\t})\n\n\tplayer.onCollide(\"coin\", (coin) =\u003e {\n\t\tdestroy(coin)\n\t\tplay(\"score\")\n\t\tscore++\n\t\tscoreLabel.text = score\n\t})\n\n\t// Fall death\n\tplayer.onUpdate(() =\u003e {\n\t\tif (player.pos.y \u003e= 480) {\n\t\t\tgo(\"lose\")\n\t\t}\n\t})\n\n\t// Enter the next level on portal\n\tplayer.onCollide(\"portal\", () =\u003e {\n\t\tplay(\"portal\")\n\t\tif (levelIdx \u003c LEVELS.length - 1) {\n\t\t\t// If there's a next level, go() to the same scene but load the next level\n\t\t\tgo(\"game\", {\n\t\t\t\tlevelIdx: levelIdx + 1,\n\t\t\t\tscore: score,\n\t\t\t})\n\t\t} else {\n\t\t\t// Otherwise we have reached the end of game, go to \"win\" scene!\n\t\t\tgo(\"win\", { score: score, })\n\t\t}\n\t})\n\n\t// Score counter text\n\tconst scoreLabel = add([\n\t\ttext(score),\n\t\tpos(12)\n\t])\n\n})\n\nscene(\"lose\", () =\u003e {\n\n\tadd([\n\t\ttext(\"You Lose\"),\n\t\tpos(12),\n\t])\n\n\t// Press any key to go back\n\tonKeyPress(start)\n\n})\n\nscene(\"win\", ({ score }) =\u003e {\n\n\tadd([\n\t\ttext(`You grabbed ${score} coins!!!`, {\n\t\t\twidth: width(),\n\t\t}),\n\t\tpos(12),\n\t])\n\n\tonKeyPress(start)\n\n})\n\nfunction start() {\n\t// Start with the \"game\" scene, with initial parameters\n\tgo(\"game\", {\n\t\tlevelIdx: 0,\n\t\tscore: 0,\n\t})\n}\n\nstart()\n","shader":"// Custom shader\nkaboom()\n\nloadSprite(\"bean\", \"/sprites/bean.png\")\n\n// Load a shader with custom fragment shader code\n// The fragment shader should define a function \"frag\", which returns a color and receives the vertex position, texture coodinate, vertex color, and texture as arguments\n// There's also the def_frag() function which returns the default fragment color\nloadShader(\"invert\", null, `\nuniform float u_time;\n\nvec4 frag(vec3 pos, vec2 uv, vec4 color, sampler2D tex) {\n\tvec4 c = def_frag();\n\tfloat t = (sin(u_time * 4.0) + 1.0) / 2.0;\n\treturn mix(c, vec4(1.0 - c.r, 1.0 - c.g, 1.0 - c.b, c.a), t);\n}\n`)\n\nconst bean = add([\n\tsprite(\"bean\"),\n\tpos(80, 40),\n\tscale(8),\n\t// Use the shader with shader() component and pass uniforms\n\tshader(\"invert\", {\n\t\t\"u_time\": time(),\n\t}),\n])\n\nbean.onUpdate(() =\u003e {\n\t// Update uniform at runtime\n\tbean.uniform[\"u_time\"] = time()\n})\n","shooter":"// TODO: document\n\nkaboom()\n\nconst objs = [\n\t\"apple\",\n\t\"lightening\",\n\t\"coin\",\n\t\"egg\",\n\t\"key\",\n\t\"door\",\n\t\"bomb\",\n\t\"meat\",\n\t\"mushroom\",\n]\n\nfor (const obj of objs) {\n\tloadSprite(obj, `/sprites/${obj}.png`)\n}\n\nloadBean()\nloadSound(\"hit\", \"/sounds/hit.mp3\")\nloadSound(\"shoot\", \"/sounds/shoot.mp3\")\nloadSound(\"explode\", \"/sounds/explode.mp3\")\nloadSound(\"OtherworldlyFoe\", \"/sounds/OtherworldlyFoe.mp3\")\n\nscene(\"battle\", () =\u003e {\n\n\tconst BULLET_SPEED = 1200\n\tconst TRASH_SPEED = 120\n\tconst BOSS_SPEED = 48\n\tconst PLAYER_SPEED = 480\n\tconst STAR_SPEED = 120\n\tconst BOSS_HEALTH = 1000\n\tconst OBJ_HEALTH = 4\n\n\tconst bossName = choose(objs)\n\n\tlet insaneMode = false\n\n\tconst music = play(\"OtherworldlyFoe\")\n\n\tvolume(0.5)\n\n\tfunction grow(rate) {\n\t\treturn {\n\t\t\tupdate() {\n\t\t\t\tconst n = rate * dt()\n\t\t\t\tthis.scale.x += n\n\t\t\t\tthis.scale.y += n\n\t\t\t},\n\t\t}\n\t}\n\n\tfunction late(t) {\n\t\tlet timer = 0\n\t\treturn {\n\t\t\tadd() {\n\t\t\t\tthis.hidden = true\n\t\t\t},\n\t\t\tupdate() {\n\t\t\t\ttimer += dt()\n\t\t\t\tif (timer \u003e= t) {\n\t\t\t\t\tthis.hidden = false\n\t\t\t\t}\n\t\t\t},\n\t\t}\n\t}\n\n\tadd([\n\t\ttext(\"KILL\", { size: 160 }),\n\t\tpos(width() / 2, height() / 2),\n\t\torigin(\"center\"),\n\t\tlifespan(1),\n\t\tfixed(),\n\t])\n\n\tadd([\n\t\ttext(\"THE\", { size: 80 }),\n\t\tpos(width() / 2, height() / 2),\n\t\torigin(\"center\"),\n\t\tlifespan(2),\n\t\tlate(1),\n\t\tfixed(),\n\t])\n\n\tadd([\n\t\ttext(bossName.toUpperCase(), { size: 120 }),\n\t\tpos(width() / 2, height() / 2),\n\t\torigin(\"center\"),\n\t\tlifespan(4),\n\t\tlate(2),\n\t\tfixed(),\n\t])\n\n\tconst sky = add([\n\t\trect(width(), height()),\n\t\tcolor(0, 0, 0),\n\t\topacity(0),\n\t])\n\n\tsky.onUpdate(() =\u003e {\n\t\tif (insaneMode) {\n\t\t\tconst t = time() * 10\n\t\t\tsky.color.r = wave(127, 255, t)\n\t\t\tsky.color.g = wave(127, 255, t + 1)\n\t\t\tsky.color.b = wave(127, 255, t + 2)\n\t\t\tsky.opacity = 1\n\t\t} else {\n\t\t\tsky.color = rgb(0, 0, 0)\n\t\t\tsky.opacity = 0\n\t\t}\n\t})\n\n// \tadd([\n// \t\tsprite(\"stars\"),\n// \t\tscale(width() / 240, height() / 240),\n// \t\tpos(0, 0),\n// \t\t\"stars\",\n// \t])\n\n// \tadd([\n// \t\tsprite(\"stars\"),\n// \t\tscale(width() / 240, height() / 240),\n// \t\tpos(0, -height()),\n// \t\t\"stars\",\n// \t])\n\n// \tonUpdate(\"stars\", (r) =\u003e {\n// \t\tr.move(0, STAR_SPEED * (insaneMode ? 10 : 1))\n// \t\tif (r.pos.y \u003e= height()) {\n// \t\t\tr.pos.y -= height() * 2\n// \t\t}\n// \t})\n\n\tconst player = add([\n\t\tsprite(\"bean\"),\n\t\tarea(),\n\t\tpos(width() / 2, height() - 64),\n\t\torigin(\"center\"),\n\t])\n\n\tonKeyDown(\"left\", () =\u003e {\n\t\tplayer.move(-PLAYER_SPEED, 0)\n\t\tif (player.pos.x \u003c 0) {\n\t\t\tplayer.pos.x = width()\n\t\t}\n\t})\n\n\tonKeyDown(\"right\", () =\u003e {\n\t\tplayer.move(PLAYER_SPEED, 0)\n\t\tif (player.pos.x \u003e width()) {\n\t\t\tplayer.pos.x = 0\n\t\t}\n\t})\n\n\tonKeyPress(\"up\", () =\u003e {\n\t\tinsaneMode = true\n\t\tmusic.speed(2)\n\t})\n\n\tonKeyRelease(\"up\", () =\u003e {\n\t\tinsaneMode = false\n\t\tmusic.speed(1)\n\t})\n\n\tplayer.onCollide(\"enemy\", (e) =\u003e {\n\t\tdestroy(e)\n\t\tdestroy(player)\n\t\tshake(120)\n\t\tplay(\"explode\")\n\t\tmusic.detune(-1200)\n\t\taddExplode(center(), 12, 120, 30)\n\t\twait(1, () =\u003e {\n\t\t\tmusic.stop()\n\t\t\tgo(\"battle\")\n\t\t})\n\t})\n\n\tfunction addExplode(p, n, rad, size) {\n\t\tfor (let i = 0; i \u003c n; i++) {\n\t\t\twait(rand(n * 0.1), () =\u003e {\n\t\t\t\tfor (let i = 0; i \u003c 2; i++) {\n\t\t\t\t\tadd([\n\t\t\t\t\t\tpos(p.add(rand(vec2(-rad), vec2(rad)))),\n\t\t\t\t\t\trect(4, 4),\n\t\t\t\t\t\toutline(4),\n\t\t\t\t\t\tscale(1 * size, 1 * size),\n\t\t\t\t\t\tlifespan(0.1),\n\t\t\t\t\t\tgrow(rand(48, 72) * size),\n\t\t\t\t\t\torigin(\"center\"),\n\t\t\t\t\t])\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t}\n\n\tfunction spawnBullet(p) {\n\t\tadd([\n\t\t\trect(12, 48),\n\t\t\tarea(),\n\t\t\tpos(p),\n\t\t\torigin(\"center\"),\n\t\t\tcolor(127, 127, 255),\n\t\t\toutline(4),\n\t\t\tmove(UP, BULLET_SPEED),\n\t\t\tcleanup(),\n\t\t\t// strings here means a tag\n\t\t\t\"bullet\",\n\t\t])\n\t}\n\n\tonUpdate(\"bullet\", (b) =\u003e {\n\t\tif (insaneMode) {\n\t\t\tb.color = rand(rgb(0, 0, 0), rgb(255, 255, 255))\n\t\t}\n\t})\n\n\tonKeyPress(\"space\", () =\u003e {\n\t\tspawnBullet(player.pos.sub(16, 0))\n\t\tspawnBullet(player.pos.add(16, 0))\n\t\tplay(\"shoot\", {\n\t\t\tvolume: 0.3,\n\t\t\tdetune: rand(-1200, 1200),\n\t\t})\n\t})\n\n\tfunction spawnTrash() {\n\t\tconst name = choose(objs.filter(n =\u003e n != bossName))\n\t\tadd([\n\t\t\tsprite(name),\n\t\t\tarea(),\n\t\t\tpos(rand(0, width()), 0),\n\t\t\thealth(OBJ_HEALTH),\n\t\t\torigin(\"bot\"),\n\t\t\t\"trash\",\n\t\t\t\"enemy\",\n\t\t\t{ speed: rand(TRASH_SPEED * 0.5, TRASH_SPEED * 1.5) },\n\t\t])\n\t\twait(insaneMode ? 0.1 : 0.3, spawnTrash)\n\t}\n\n\tconst boss = add([\n\t\tsprite(bossName),\n\t\tarea(),\n\t\tpos(width() / 2, 40),\n\t\thealth(BOSS_HEALTH),\n\t\tscale(3),\n\t\torigin(\"top\"),\n\t\t\"enemy\",\n\t\t{\n\t\t\tdir: 1,\n\t\t},\n\t])\n\n\ton(\"death\", \"enemy\", (e) =\u003e {\n\t\tdestroy(e)\n\t\tshake(2)\n\t\taddKaboom(e.pos)\n\t})\n\n\ton(\"hurt\", \"enemy\", (e) =\u003e {\n\t\tshake(1)\n\t\tplay(\"hit\", {\n\t\t\tdetune: rand(-1200, 1200),\n\t\t\tspeed: rand(0.2, 2),\n\t\t})\n\t})\n\n\tconst timer = add([\n\t\ttext(0),\n\t\tpos(12, 32),\n\t\tfixed(),\n\t\t{ time: 0, },\n\t])\n\n\ttimer.onUpdate(() =\u003e {\n\t\ttimer.time += dt()\n\t\ttimer.text = timer.time.toFixed(2)\n\t})\n\n\tonCollide(\"bullet\", \"enemy\", (b, e) =\u003e {\n\t\tdestroy(b)\n\t\te.hurt(insaneMode ? 10 : 1)\n\t\taddExplode(b.pos, 1, 24, 1)\n\t})\n\n\tonUpdate(\"trash\", (t) =\u003e {\n\t\tt.move(0, t.speed * (insaneMode ? 5 : 1))\n\t\tif (t.pos.y - t.height \u003e height()) {\n\t\t\tdestroy(t)\n\t\t}\n\t})\n\n\tboss.onUpdate((p) =\u003e {\n\t\tboss.move(BOSS_SPEED * boss.dir * (insaneMode ? 3 : 1), 0)\n\t\tif (boss.dir === 1 \u0026\u0026 boss.pos.x \u003e= width() - 20) {\n\t\t\tboss.dir = -1\n\t\t}\n\t\tif (boss.dir === -1 \u0026\u0026 boss.pos.x \u003c= 20) {\n\t\t\tboss.dir = 1\n\t\t}\n\t})\n\n\tboss.onHurt(() =\u003e {\n\t\thealthbar.set(boss.hp())\n\t})\n\n\tboss.onDeath(() =\u003e {\n\t\tmusic.stop()\n\t\tgo(\"win\", {\n\t\t\ttime: timer.time,\n\t\t\tboss: bossName,\n\t\t})\n\t})\n\n\tconst healthbar = add([\n\t\trect(width(), 24),\n\t\tpos(0, 0),\n\t\tcolor(127, 255, 127),\n\t\tfixed(),\n\t\t{\n\t\t\tmax: BOSS_HEALTH,\n\t\t\tset(hp) {\n\t\t\t\tthis.width = width() * hp / this.max\n\t\t\t\tthis.flash = true\n\t\t\t},\n\t\t},\n\t])\n\n\thealthbar.onUpdate(() =\u003e {\n\t\tif (healthbar.flash) {\n\t\t\thealthbar.color = rgb(255, 255, 255)\n\t\t\thealthbar.flash = false\n\t\t} else {\n\t\t\thealthbar.color = rgb(127, 255, 127)\n\t\t}\n\t})\n\n\tadd([\n\t\ttext(\"UP: insane mode\", { width: width() / 2, size: 32 }),\n\t\torigin(\"botleft\"),\n\t\tpos(24, height() - 24),\n\t])\n\n\tspawnTrash()\n\n})\n\nscene(\"win\", ({ time, boss }) =\u003e {\n\n\tconst b = burp({\n\t\tloop: true,\n\t})\n\n\tloop(0.5, () =\u003e {\n\t\tb.detune(rand(-1200, 1200))\n\t})\n\n\tadd([\n\t\tsprite(boss),\n\t\tcolor(255, 0, 0),\n\t\torigin(\"center\"),\n\t\tscale(8),\n\t\tpos(width() / 2, height() / 2),\n\t])\n\n\tadd([\n\t\ttext(time.toFixed(2), 24),\n\t\torigin(\"center\"),\n\t\tpos(width() / 2, height() / 2),\n\t])\n\n})\n\ngo(\"battle\")\n","size":"kaboom({\n\t// without specifying \"width\" and \"height\", kaboom will size to the container (document.body by default)\n\twidth: 200,\n\theight: 100,\n\t// \"stretch\" stretches the defined width and height to fullscreen\n\tstretch: true,\n\t// \"letterbox\" makes stretching keeps aspect ratio (leaves black bars on empty spaces), have no effect without \"stretch\"\n\tletterbox: true,\n})\n\nloadBean()\n\nadd([\n\tsprite(\"bean\"),\n])\n","sprite":"// Sprite animation\n\n// Start a kaboom game\nkaboom({\n\t// Scale the whole game up\n\tscale: 4,\n\t// Set the default font\n\tfont: \"sinko\",\n})\n\n// Loading a multi-frame sprite\nloadSprite(\"dino\", \"/sprites/dino.png\", {\n\t// The image contains 9 frames layed out horizontally, slice it into individual frames\n\tsliceX: 9,\n\t// Define animations\n\tanims: {\n\t\t\"idle\": {\n\t\t\t// Starts from frame 0, ends at frame 3\n\t\t\tfrom: 0,\n\t\t\tto: 3,\n\t\t\t// Frame per second\n\t\t\tspeed: 5,\n\t\t\tloop: true,\n\t\t},\n\t\t\"run\": {\n\t\t\tfrom: 4,\n\t\t\tto: 7,\n\t\t\tspeed: 10,\n\t\t\tloop: true,\n\t\t},\n\t\t// This animation only has 1 frame\n\t\t\"jump\": 8\n\t},\n})\n\nconst SPEED = 120\nconst JUMP_FORCE = 240\n\ngravity(640)\n\n// Add our player character\nconst player = add([\n\tsprite(\"dino\"),\n\tpos(center()),\n\torigin(\"center\"),\n\tarea(),\n\tbody(),\n])\n\n// .play is provided by sprite() component, it starts playing the specified animation (the animation information of \"idle\" is defined above in loadSprite)\nplayer.play(\"idle\")\n\n// Add a platform\nadd([\n\trect(width(), 24),\n\tarea(),\n\toutline(1),\n\tpos(0, height() - 24),\n\tsolid(),\n])\n\n// Switch to \"idle\" or \"run\" animation when player hits ground\nplayer.onGround(() =\u003e {\n\tif (!isKeyDown(\"left\") \u0026\u0026 !isKeyDown(\"right\")) {\n\t\tplayer.play(\"idle\")\n\t} else {\n\t\tplayer.play(\"run\")\n\t}\n})\n\nplayer.onAnimEnd(\"idle\", () =\u003e {\n\t// You can also register an event that runs when certain anim ends\n})\n\nonKeyPress(\"space\", () =\u003e {\n\tif (player.isGrounded()) {\n\t\tplayer.jump(JUMP_FORCE)\n\t\tplayer.play(\"jump\")\n\t}\n})\n\nonKeyDown(\"left\", () =\u003e {\n\tplayer.move(-SPEED, 0)\n\tplayer.flipX(true)\n\t// .play() will reset to the first frame of the anim, so we want to make sure it only runs when the current animation is not \"run\"\n\tif (player.isGrounded() \u0026\u0026 player.curAnim() !== \"run\") {\n\t\tplayer.play(\"run\")\n\t}\n})\n\nonKeyDown(\"right\", () =\u003e {\n\tplayer.move(SPEED, 0)\n\tplayer.flipX(false)\n\tif (player.isGrounded() \u0026\u0026 player.curAnim() !== \"run\") {\n\t\tplayer.play(\"run\")\n\t}\n})\n\nonKeyRelease([\"left\", \"right\"], () =\u003e {\n\t// Only reset to \"idle\" if player is not holding any of these keys\n\tif (player.isGrounded() \u0026\u0026 !isKeyDown(\"left\") \u0026\u0026 !isKeyDown(\"right\")) {\n\t\tplayer.play(\"idle\")\n\t}\n})\n\nconst getInfo = () =\u003e `\nAnim: ${player.curAnim()}\nFrame: ${player.frame}\n`.trim()\n\n// Add some text to show the current animation\nconst label = add([\n\ttext(getInfo()),\n\tpos(4),\n])\n\nlabel.onUpdate(() =\u003e {\n\tlabel.text = getInfo()\n})\n\n// Check out https://kaboomjs.com#SpriteComp for everything sprite() provides\n","spriteMerged":"/**\n * Loads and merges multiple images from given URLs.\n * Images must have same size as first image, to get drawn over previously merged images.\n * \n * The returned Promise\u003cImageData\u003e can be used in loadSprite and loadSpriteAtlas as src-parameter\n * \n * @param {string[]} urls - URLs of images to merge\n * @returns Promise\u003cImageData\u003e\n */\nfunction mergeImg(urls) {\n    let promises = [];\n    for (let url of urls) {\n        const img = new Image();\n        img.src = url;\n        img.crossOrigin = \"anonymous\";\n        promises.push(new Promise((resolve, reject) =\u003e {\n            img.onload = () =\u003e {\n                resolve(img);\n            };\n            img.onerror = () =\u003e {\n                reject(`failed to load ${url}`);\n            };\n        }));\n    }\n    return new Promise((resolve, reject) =\u003e {\n        Promise.all(promises).then((images) =\u003e {\n            const canvas = document.createElement(\"canvas\");\n\n\t\t\tconst width = images[0].width;\n\t\t\tconst height = images[0].height;\n            canvas.width = width;\n            canvas.height = height;\n            const ctx = canvas.getContext(\"2d\");\n            if (ctx) {\n                images.forEach((img, i) =\u003e {\n\t\t\t\t\tif (img.width === width \u0026\u0026 img.height === height) {\n\t\t\t\t\t\tctx.drawImage(img, 0, 0);\n\t\t\t\t\t}\n                });\n                resolve(ctx.getImageData(0, 0, width, height));\n            } else {\n\t\t\t\treject();\n\t\t\t}\n        }).catch((error) =\u003e reject(error));\n    })\n}\n\n\n\n\n\n\n\n// Start a kaboom game\nkaboom({\n\t// Scale the whole game up\n\tscale: 2,\n\t// Set the default font\n\tfont: \"sinko\",\n})\n\n// animationsettings in Spriteatlas\nconst anims = {\n    x: 0, \n    y: 0, \n    height: 1344, \n    width: 832, \n    sliceX: 13, \n    sliceY: 21,\n    anims: {\n        'walk-up': {from: 104, to: 112}, \n        'walk-left': {from: 117, to: 125}, \n        'walk-down': {from: 130, to: 138}, \n        'walk-right': {from: 143, to: 151}, \n        'idle-up': {from: 104, to: 104}, \n        'idle-left': {from: 117, to: 117}, \n        'idle-down': {from: 130, to: 130}, \n        'idle-right': {from: 143, to: 143}, \n    }\n}\n\nconst playerAnims = {\n    player: anims\n};\n\nconst chestAnims = {\n    chest: anims\n};\n\nconst corpusAnims = {\n    corpus: anims\n};\n\n// Sprites are taken from https://github.com/gaconkzk/Universal-LPC-spritesheet\n// under Licenses GNU GPL 3.0 (http://creativecommons.org/licenses/by-sa/3.0/) and CC-BY-SA 3.0 (http://www.gnu.org/licenses/gpl-3.0.html)\n// load Spriteatlas with leather armor\nloadSpriteAtlas(\"/sprites/spritemerge_chest.png\", chestAnims)\n// load Spriteatlas with body\nloadSpriteAtlas(\"/sprites/spritemerge_corpus.png\", corpusAnims)\n// load and merge body and leather armor \nmergeImg([\"/sprites/spritemerge_corpus.png\", \"/sprites/spritemerge_chest.png\"]).then((img) =\u003e\n    loadSpriteAtlas(img, playerAnims)\n);\n\nlet DIRECTION = 'down';\n\ngravity(0)\n\n// Add our player character with body and leather armor spriteatlas\nconst player = add([\n    sprite('player'),\n    pos(center()),\n\torigin(\"center\"),\n    area(),\n    body()\n])\n\n// add only body\nconst corpus = add([\n    sprite('corpus'),\n    pos(center().add(-128, 0)),\n\torigin(\"center\"),\n    area(),\n    body()\n])\n\n// add only leather armor\nconst chest = add([\n    sprite('chest'),\n    pos(center().add(128, 0)),\n\torigin(\"center\"),\n    area(),\n    body()\n])\n\n// .play is provided by sprite() component, it starts playing the specified animation (the animation information of \"idle\" is defined above in loadSprite)\nplayer.play(\"idle-down\")\nchest.play(\"idle-down\")\ncorpus.play(\"idle-down\")\n\n\n// provide movementanimations\nonKeyDown('left', () =\u003e {\n    DIRECTION = 'left';\n    switchAnimation('walk');\n})\nonKeyDown('right', () =\u003e {\n    DIRECTION = 'right';\n    switchAnimation('walk');\n})\nonKeyDown('down', () =\u003e {\n    DIRECTION = 'down';\n    switchAnimation('walk');\n})\nonKeyDown('up', () =\u003e {\n    DIRECTION = 'up';\n    switchAnimation('walk');\n})\nonKeyRelease(['left', 'right', 'down', 'up'], () =\u003e {\n    switchAnimation('idle');\n})\n\nfunction switchAnimation(type) {\n    if (player.curAnim() !== type+'-'+DIRECTION) {\n        player.play(type+'-'+DIRECTION, {loop: true});\n        chest.play(type+'-'+DIRECTION, {loop: true});\n        corpus.play(type+'-'+DIRECTION, {loop: true});\n    }\n}\n\n\nconst getInfo = () =\u003e `\nAnim: ${player.curAnim()}\nFrame: ${player.frame}\n`.trim()\n\n// Add some text to show the current animation\nconst label = add([\n\ttext(getInfo()),\n\tpos(4),\n])\n\nlabel.onUpdate(() =\u003e {\n\tlabel.text = getInfo()\n})\n\n// Check out https://kaboomjs.com#SpriteComp for everything sprite() provides\n","spriteatlas":"kaboom({\n\tscale: 4,\n\tclearColor: [0, 0, 0],\n})\n\n// https://0x72.itch.io/dungeontileset-ii\nloadSpriteAtlas(\"/sprites/dungeon.png\", {\n\t\"hero\": {\n\t\t\"x\": 128,\n\t\t\"y\": 196,\n\t\t\"width\": 144,\n\t\t\"height\": 28,\n\t\t\"sliceX\": 9,\n\t\t\"anims\": {\n\t\t\t\"idle\": {\n\t\t\t\t\"from\": 0,\n\t\t\t\t\"to\": 3,\n\t\t\t\t\"speed\": 3,\n\t\t\t\t\"loop\": true\n\t\t\t},\n\t\t\t\"run\": {\n\t\t\t\t\"from\": 4,\n\t\t\t\t\"to\": 7,\n\t\t\t\t\"speed\": 10,\n\t\t\t\t\"loop\": true\n\t\t\t},\n\t\t\t\"hit\": 8\n\t\t}\n\t},\n\t\"ogre\": {\n\t\t\"x\": 16,\n\t\t\"y\": 320,\n\t\t\"width\": 256,\n\t\t\"height\": 32,\n\t\t\"sliceX\": 8,\n\t\t\"anims\": {\n\t\t\t\"idle\": {\n\t\t\t\t\"from\": 0,\n\t\t\t\t\"to\": 3,\n\t\t\t\t\"speed\": 3,\n\t\t\t\t\"loop\": true\n\t\t\t},\n\t\t\t\"run\": {\n\t\t\t\t\"from\": 4,\n\t\t\t\t\"to\": 7,\n\t\t\t\t\"speed\": 10,\n\t\t\t\t\"loop\": true\n\t\t\t}\n\t\t}\n\t},\n\t\"floor\": {\n\t\t\"x\": 16,\n\t\t\"y\": 64,\n\t\t\"width\": 48,\n\t\t\"height\": 48,\n\t\t\"sliceX\": 3,\n\t\t\"sliceY\": 3\n\t},\n\t\"chest\": {\n\t\t\"x\": 304,\n\t\t\"y\": 304,\n\t\t\"width\": 48,\n\t\t\"height\": 16,\n\t\t\"sliceX\": 3,\n\t\t\"anims\": {\n\t\t\t\"open\": {\n\t\t\t\t\"from\": 0,\n\t\t\t\t\"to\": 2,\n\t\t\t\t\"speed\": 20,\n\t\t\t\t\"loop\": false\n\t\t\t},\n\t\t\t\"close\": {\n\t\t\t\t\"from\": 2,\n\t\t\t\t\"to\": 0,\n\t\t\t\t\"speed\": 20,\n\t\t\t\t\"loop\": false\n\t\t\t}\n\t\t}\n\t},\n\t\"sword\": {\n\t\t\"x\": 322,\n\t\t\"y\": 81,\n\t\t\"width\": 12,\n\t\t\"height\": 30\n\t},\n\t\"wall\": {\n\t\t\"x\": 16,\n\t\t\"y\": 16,\n\t\t\"width\": 16,\n\t\t\"height\": 16\n\t},\n\t\"wall_top\": {\n\t\t\"x\": 16,\n\t\t\"y\": 0,\n\t\t\"width\": 16,\n\t\t\"height\": 16\n\t},\n\t\"wall_left\": {\n\t\t\"x\": 16,\n\t\t\"y\": 128,\n\t\t\"width\": 16,\n\t\t\"height\": 16\n\t},\n\t\"wall_right\": {\n\t\t\"x\": 0,\n\t\t\"y\": 128,\n\t\t\"width\": 16,\n\t\t\"height\": 16\n\t},\n\t\"wall_topleft\": {\n\t\t\"x\": 32,\n\t\t\"y\": 128,\n\t\t\"width\": 16,\n\t\t\"height\": 16\n\t},\n\t\"wall_topright\": {\n\t\t\"x\": 48,\n\t\t\"y\": 128,\n\t\t\"width\": 16,\n\t\t\"height\": 16\n\t},\n\t\"wall_botleft\": {\n\t\t\"x\": 32,\n\t\t\"y\": 144,\n\t\t\"width\": 16,\n\t\t\"height\": 16\n\t},\n\t\"wall_botright\": {\n\t\t\"x\": 48,\n\t\t\"y\": 144,\n\t\t\"width\": 16,\n\t\t\"height\": 16\n\t},\n})\n\n// floor\naddLevel([\n\t\"xxxxxxxxxx\",\n\t\"          \",\n\t\"          \",\n\t\"          \",\n\t\"          \",\n\t\"          \",\n\t\"          \",\n\t\"          \",\n\t\"          \",\n\t\"          \",\n], {\n\twidth: 16,\n\theight: 16,\n\t\" \": () =\u003e [\n\t\tsprite(\"floor\", { frame: ~~rand(0, 8) }),\n\t],\n})\n\n// objects\nconst map = addLevel([\n\t\"tttttttttt\",\n\t\"cwwwwwwwwd\",\n\t\"l        r\",\n\t\"l        r\",\n\t\"l        r\",\n\t\"l      $ r\",\n\t\"l        r\",\n\t\"l $      r\",\n\t\"attttttttb\",\n\t\"wwwwwwwwww\",\n], {\n\twidth: 16,\n\theight: 16,\n\t\"$\": () =\u003e [\n\t\tsprite(\"chest\"),\n\t\tarea(),\n\t\tsolid(),\n\t\t{ opened: false, },\n\t\t\"chest\",\n\t],\n\t\"a\": () =\u003e [\n\t\tsprite(\"wall_botleft\"),\n\t\tarea({ width: 4 }),\n\t\tsolid(),\n\t],\n\t\"b\": () =\u003e [\n\t\tsprite(\"wall_botright\"),\n\t\tarea({ width: 4, offset: vec2(12, 0) }),\n\t\tsolid(),\n\t],\n\t\"c\": () =\u003e [\n\t\tsprite(\"wall_topleft\"),\n\t\tarea(),\n\t\tsolid(),\n\t],\n\t\"d\": () =\u003e [\n\t\tsprite(\"wall_topright\"),\n\t\tarea(),\n\t\tsolid(),\n\t],\n\t\"w\": () =\u003e [\n\t\tsprite(\"wall\"),\n\t\tarea(),\n\t\tsolid(),\n\t],\n\t\"t\": () =\u003e [\n\t\tsprite(\"wall_top\"),\n\t\tarea({ height: 4, offset: vec2(0, 12) }),\n\t\tsolid(),\n\t],\n\t\"l\": () =\u003e [\n\t\tsprite(\"wall_left\"),\n\t\tarea({ width: 4, }),\n\t\tsolid(),\n\t],\n\t\"r\": () =\u003e [\n\t\tsprite(\"wall_right\"),\n\t\tarea({ width: 4, offset: vec2(12, 0) }),\n\t\tsolid(),\n\t],\n})\n\nconst player = add([\n\tpos(map.getPos(2, 2)),\n\tsprite(\"hero\", { anim: \"idle\" }),\n\tarea({ width: 12, height: 12, offset: vec2(0, 6) }),\n\tsolid(),\n\torigin(\"center\"),\n])\n\nconst ogre = add([\n\tsprite(\"ogre\"),\n\tpos(map.getPos(4, 4)),\n\torigin(\"bot\"),\n\tarea({ scale: 0.5 }),\n\tsolid(),\n])\n\nconst sword = add([\n\tpos(),\n\tsprite(\"sword\"),\n\torigin(\"bot\"),\n\trotate(0),\n\tfollow(player, vec2(-4, 9)),\n\tspin(),\n])\n\nfunction spin() {\n\tlet spinning = false\n\treturn {\n\t\tid: \"spin\",\n\t\tupdate() {\n\t\t\tif (spinning) {\n\t\t\t\tthis.angle += 1200 * dt()\n\t\t\t\tif (this.angle \u003e= 360) {\n\t\t\t\t\tthis.angle = 0\n\t\t\t\t\tspinning = false\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tspin() {\n\t\t\tspinning = true\n\t\t},\n\t}\n}\n\nonKeyPress(\"space\", () =\u003e {\n\tlet interacted = false\n\tevery(\"chest\", (c) =\u003e {\n\t\tif (player.isTouching(c)) {\n\t\t\tif (c.opened) {\n\t\t\t\tc.play(\"close\")\n\t\t\t\tc.opened = false\n\t\t\t} else {\n\t\t\t\tc.play(\"open\")\n\t\t\t\tc.opened = true\n\t\t\t}\n\t\t\tinteracted = true\n\t\t}\n\t})\n\tif (!interacted) {\n\t\tsword.spin()\n\t}\n})\n\nconst SPEED = 120\n\nconst dirs = {\n\t\"left\": LEFT,\n\t\"right\": RIGHT,\n\t\"up\": UP,\n\t\"down\": DOWN,\n}\n\nplayer.onUpdate(() =\u003e {\n\tcamPos(player.pos)\n})\n\nonKeyDown(\"right\", () =\u003e {\n\tplayer.flipX(false)\n\tsword.flipX(false)\n\tplayer.move(SPEED, 0)\n\tsword.follow.offset = vec2(-4, 9)\n})\n\nonKeyDown(\"left\", () =\u003e {\n\tplayer.flipX(true)\n\tsword.flipX(true)\n\tplayer.move(-SPEED, 0)\n\tsword.follow.offset = vec2(4, 9)\n})\n\nonKeyDown(\"up\", () =\u003e {\n\tplayer.move(0, -SPEED)\n})\n\nonKeyDown(\"down\", () =\u003e {\n\tplayer.move(0, SPEED)\n})\n\nonKeyPress([\"left\", \"right\", \"up\", \"down\"], () =\u003e {\n\tplayer.play(\"run\")\n})\n\nonKeyRelease([\"left\", \"right\", \"up\", \"down\"], () =\u003e {\n\tif (\n\t\t!isKeyDown(\"left\")\n\t\t\u0026\u0026 !isKeyDown(\"right\")\n\t\t\u0026\u0026 !isKeyDown(\"up\")\n\t\t\u0026\u0026 !isKeyDown(\"down\")\n\t) {\n\t\tplayer.play(\"idle\")\n\t}\n})\n","text":"kaboom()\n\n// Load custom bitmap font, specifying the width and height of each character in the image\nloadFont(\"unscii\", \"/fonts/unscii_8x8.png\", 8, 8)\n\n// List of built-in fonts (\"o\" at the end means the outlined version)\nconst builtinFonts = [\n\t\"apl386o\",\n\t\"apl386\",\n\t\"sinko\",\n\t\"sink\",\n]\n\n// Make a list of fonts that we cycle through\nconst fonts = [\n\t...builtinFonts,\n\t\"unscii\"\n]\n\n// Keep track which is the current font\nlet curFont = 0\nlet curSize = 48\nconst pad = 24\n\n// Add a game object with text() component + options\nconst input = add([\n\tpos(pad),\n\t// Render text with the text() component\n\ttext(\"Type! And try arrow keys!\", {\n\t\t// What font to use\n\t\tfont: fonts[curFont],\n\t\t// It'll wrap to next line if the text width exceeds the width option specified here\n\t\twidth: width() - pad * 2,\n\t\t// The height of character\n\t\tsize: curSize,\n\t\tlineSpacing: 8,\n\t\tletterSpacing: 4,\n\t\t// Transform each character for special effects\n\t\ttransform: (idx, ch) =\u003e ({\n\t\t\tcolor: hsl2rgb((time() * 0.2 + idx * 0.1) % 1, 0.7, 0.8),\n\t\t\tpos: vec2(0, wave(-4, 4, time() * 4 + idx * 0.5)),\n\t\t\tscale: wave(1, 1.2, time() * 3 + idx),\n\t\t\tangle: wave(-9, 9, time() * 3 + idx),\n\t\t}),\n\t}),\n])\n\n// Like onKeyPressRepeat() but more suitable for text input.\nonCharInput((ch) =\u003e {\n\tinput.text += ch\n})\n\n// Like onKeyPress() but will retrigger when key is being held (which is similar to text input behavior)\n// Insert new line when user presses enter\nonKeyPressRepeat(\"enter\", () =\u003e {\n\tinput.text += \"\\n\"\n})\n\n// Delete last character\nonKeyPressRepeat(\"backspace\", () =\u003e {\n\tinput.text = input.text.substring(0, input.text.length - 1)\n})\n\n// Go to previous font\nonKeyPress(\"left\", () =\u003e {\n\tif (--curFont \u003c 0) curFont = fonts.length - 1\n\tinput.font = fonts[curFont]\n})\n\n// Go to next font\nonKeyPress(\"right\", () =\u003e {\n\tcurFont = (curFont + 1) % fonts.length\n\tinput.font = fonts[curFont]\n})\n\nconst SIZE_SPEED = 32\nconst SIZE_MIN = 12\nconst SIZE_MAX = 120\n\n// Increase text size\nonKeyDown(\"up\", () =\u003e {\n\tcurSize = Math.min(curSize + dt() * SIZE_SPEED, SIZE_MAX)\n\tinput.textSize = curSize\n})\n\n// Decrease text size\nonKeyDown(\"down\", () =\u003e {\n\tcurSize = Math.max(curSize - dt() * SIZE_SPEED, SIZE_MIN)\n\tinput.textSize = curSize\n})\n\n// Use this syntax and style option to style chunks of text, with CharTransformFunc.\nadd([\n\ttext(\"[oh hi].green here's some [styled].wavy text\", {\n\t\twidth: width(),\n\t\tstyles: {\n\t\t\t\"green\": {\n\t\t\t\tcolor: rgb(128, 128, 255),\n\t\t\t},\n\t\t\t\"wavy\": (idx, ch) =\u003e ({\n\t\t\t\tcolor: hsl2rgb((time() * 0.2 + idx * 0.1) % 1, 0.7, 0.8),\n\t\t\t\tpos: vec2(0, wave(-4, 4, time() * 6 + idx * 0.5)),\n\t\t\t}),\n\t\t},\n\t}),\n\tpos(pad, height() - pad),\n\torigin(\"botleft\"),\n\t// scale(0.5),\n])\n\n// Check out https://kaboomjs.com#TextComp for everything text() offers\n","timer":"kaboom()\n\nloadSprite(\"bean\", \"/sprites/bean.png\")\n\n// Execute something after every 0.5 seconds.\nloop(0.5, () =\u003e {\n\n\tconst bean = add([\n\t\tsprite(\"bean\"),\n\t\tpos(rand(vec2(0), vec2(width(), height())))\n\t])\n\n\t// Execute something after 3 seconds.\n\twait(3, () =\u003e {\n\t\tdestroy(bean)\n\t})\n\n})\n"}},"__N_SSP":true},"page":"/play","query":{"demo":"movement"},"buildId":"qc8zwdgH8rYE9DWE3SuTM","isFallback":false,"gssp":true,"scriptLoader":[]}</script></body></html>
